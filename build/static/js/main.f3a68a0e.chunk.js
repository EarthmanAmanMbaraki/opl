(this.webpackJsonpopl=this.webpackJsonpopl||[]).push([[0],{148:function(e,t,r){},159:function(e,t,r){},233:function(e,t,r){},270:function(e,t,r){},271:function(e,t,r){},278:function(e,t,r){},330:function(e,t){},332:function(e,t){},342:function(e,t){},344:function(e,t){},371:function(e,t){},373:function(e,t){},374:function(e,t){},379:function(e,t){},381:function(e,t){},400:function(e,t){},412:function(e,t){},415:function(e,t){},420:function(e,t,r){},422:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),s=r(41),o=r.n(s),c=(r(270),r(271),r(12)),i=r(6),u=r(7),l=r(8),p=r(9),d=r(32),h=r(27),_=r(5),j=r(3),m=r.n(j),b=r(426),O=r(427),f=r(240),x=r(430),v=r(431),y=r(428),T=r(23);function A(e,t){return D.apply(this,arguments)}function D(){return(D=Object(_.a)(m.a.mark((function e(t,r){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opl.azurewebsites.net/accounts/get-token/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,n=null,e.abrupt("return",a);case 11:throw e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var C=r(51),g=r(154),E=r(238),N=r(100),S=r.n(N),I="GET_DEPOT_LIST",w="GET_DEPOT_CUSTOMER_LIST",k="GET_DEPOT_EXPAND",R="GET_DEPOT_EXPAND_DAILY",P="GET_DEPOT_EXPAND_MONTHLY",M="GET_DEPOT_EXPAND_MAIN_DAILY",U="GET_DEPOT_EXPAND_CUSTOMERS",L="GET_PRODUCT_EXPAND_DAILY",z="GET_PRODUCT_EXPAND_MONTHLY",F="GET_PRODUCT_EXPAND",Y="GET_CUSTOMER_EXPAND_ALL",H="GET_CUSTOMER_EXPAND_MONTH",G="GET_CUSTOMER_EXPAND",B="GET_DEPOT_TIME_SERIES",X="UPDATE_DASHBOARD_PRODUCT_MONTHLY",W="UPDATE_DASHBOARD_DEPOT_YEAR",J="UPDATE_DASHBOARD_DEPOT_MONTH",K="UPDATE_DASHBOARD_CUSTOMER_YEAR",q="UPDATE_DASHBOARD_CUSTOMER_MONTH",V="UPDATE_DASHBOARD_CUSTOMER_PRODUCT",Q="UPDATE_DEPOT_TIME_SERIES_YEAR",$="UPDATE_DEPOT_TIME_SERIES_MONTH",Z="UPDATE_DEPOT_INDEX",ee="UPDATE_DEPOT_CUSTOMER_MONTH",te="UPDATE_DEPOT_CUSTOMER_YEAR",re="UPDATE_CUSTOMER_YEAR",ne="GET_TOKEN",ae="GET_TOKEN_ERROR",se="GET_TOKEN_ERROR_REMOVE",oe="UPDATE_SELECTION_DATE",ce="UPDATE_METRIC",ie="CREATE_CUSTOMER",ue="CREATE_CUSTOMER_ERROR",le="CUSTOMER_LIST",pe="CUSTOMER_LIST_MONTHLY",de="CREATE_TRUCK",he="CREATE_TRUCK_ERROR",_e="CREATE_ENTRY",je="CREATE_ENTRY_ERROR",me="UPDATE_ENTRY",be="UPDATE_ENTRY_ERROR",Oe="DELETE_ENTRY",fe="DELETE_ENTRY_ERROR",xe="ENTRY_LIST",ve="PRODUCT_LIST",ye="PRODUCT_INDEX",Te="MAIN_BI_LIST",Ae="BI_LIST",De="PRODUCT_BI_LIST",Ce="CUSTOMER_BI_LIST",ge="CUSTOMER_DATA",Ee="ORDER_DATES",Ne="USER_LOGGED_OUT",Se="UPLOAD_EXCEL",Ie="UPLOAD_EXCEL_ERROR",we=function(e,t){return Object.assign({},e,t)},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return we(e,{token:t.payload,login_error:null});case ae:case se:return we(e,{login_error:t.payload});default:return e}},Re=function(e,t){return Object.assign({},e,t)},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return Re(e,{created_customer:t.payload,create_customer_error:null});case ue:return Re(e,{create_customer_error:t.payload});case de:return Re(e,{created_truck:t.payload,create_truck_error:null});case he:return Re(e,{create_truck_error:t.payload});case _e:return Re(e,{created_entry:t.payload,create_entry_error:null});case je:return Re(e,{create_entry_error:t.payload});case Se:return Re(e,{uploaded_excel:t.payload,upload_excel_error:null});case Ie:return Re(e,{upload_excel_error:t.payload});default:return e}},Me=function(e,t){return Object.assign({},e,t)},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Me(e,{depot_list:t.payload});case k:return Me(e,{depot_expand:t.payload});case R:return Me(e,{depot_expand_daily:t.payload});case w:return Me(e,{depot_customer_list:t.payload});case P:return Me(e,{depot_expand_monthly:t.payload});case M:return Me(e,{depot_expand_main_daily:t.payload});case U:return Me(e,{depot_expand_customers:t.payload});case F:return Me(e,{product_expand:t.payload});case z:return Me(e,{product_expand_monthly:t.payload});case L:return Me(e,{product_expand_daily:t.payload});case B:return Me(e,{depot_time_series:t.payload});case G:return Me(e,{customer_expand:t.payload});case Y:return Me(e,{customer_expand_all:t.payload});case H:return Me(e,{customer_expand_month:t.payload});case oe:return Me(e,{selection_dates:t.payload});case ce:return Me(e,{dashboard_metric:t.payload});case le:return Me(e,{customers:t.payload});case pe:return Me(e,{customers_monthly:t.payload});case ve:return Me(e,{products:t.payload});case ye:return Me(e,{product_index:t.payload});case xe:return Me(e,{entries:t.payload});case Te:return Me(e,{main_bi_list:t.payload});case Ae:return Me(e,{bi_list:t.payload});case De:return Me(e,{product_bi_list:t.payload});case Ce:return Me(e,{customer_bi_list:t.payload});case ge:return Me(e,{customer_data:t.payload});case Ee:return Me(e,{order_dates:t.payload});default:return e}},Le=function(e,t){return Object.assign({},e,t)},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Le(e,{updated_entry:t.payload,update_entry_error:null});case be:return Le(e,{update_entry_error:t.payload});case Oe:return Le(e,{deleted_entry:t.payload,delete_entry_error:null});case fe:return Le(e,{delete_entry_error:t.payload});case X:return Le(e,{update_dashboard_year_product_monthly:t.payload});case J:return Le(e,{update_dashboard_depot_month:t.payload});case W:return Le(e,{update_dashboard_depot_year:t.payload});case Z:return Le(e,{update_depot_index:t.payload});case q:return Le(e,{update_dashboard_customer_month:t.payload});case K:return Le(e,{update_dashboard_customer_year:t.payload});case V:return Le(e,{update_dashboard_customer_product:t.payload});case $:return Le(e,{update_depot_time_series_month:t.payload});case Q:return Le(e,{update_depot_time_series_year:t.payload});case ee:return Le(e,{update_depot_customer_month:t.payload});case te:return Le(e,{update_depot_customer_year:t.payload});case re:return Le(e,{update_customer_year:t.payload});default:return e}},Fe=Object(C.b)({auth_reducer:ke,create_reducer:Pe,list_reducer:Ue,update_reducer:ze}),Ye=function(e,t){return t.type===Ne&&(S.a.removeItem("persist:root"),e=void 0),Fe(e,t)},He={key:"root",storage:S.a},Ge=Object(g.a)(He,Ye),Be=Object(C.c)(Ge,Object(C.a)(E.a));Object(g.b)(Be);function Xe(){return We.apply(this,arguments)}function We(){return(We=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,!1===t.is_staff&&(n=n.filter((function(e){return e.name===t.depot}))),r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Je(){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/expand/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,!1===t.is_staff&&(n=n.filter((function(e){return e.name===t.depot}))),r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function qe(){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/expand/monthly/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,!1===t.is_staff&&(n=n.filter((function(e){return e.name===t.depot}))),r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Qe(){return $e.apply(this,arguments)}function $e(){return($e=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/expand/daily/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,!1===t.is_staff&&(n=n.filter((function(e){return e.name===t.depot}))),r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Ze(){return et.apply(this,arguments)}function et(){return(et=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/expand/main/daily/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,!1===t.is_staff&&(n=n.filter((function(e){return e.name===t.depot}))),r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function tt(){return rt.apply(this,arguments)}function rt(){return(rt=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/expand/customers/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,!1===t.is_staff&&(n=n.filter((function(e){return e.name===t.depot}))),r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function nt(){return at.apply(this,arguments)}function at(){return(at=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/products/expand/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function st(){return ot.apply(this,arguments)}function ot(){return(ot=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/products/expand/monthly/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ct(){return it.apply(this,arguments)}function it(){return(it=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/products/expand/daily/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ut(){return lt.apply(this,arguments)}function lt(){return(lt=Object(_.a)(m.a.mark((function e(){var t,r,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,r=Be.getState().auth_reducer.token.data.id,e.prev=2,e.next=5,fetch("https://opl.azurewebsites.net/depots/".concat(r,"/"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 5:return n=e.sent,e.next=8,n.json();case 8:return a=e.sent,n=null,e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(2),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function pt(e,t){return dt.apply(this,arguments)}function dt(){return(dt=Object(_.a)(m.a.mark((function e(t,r){var n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/customers/expand/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(n)}});case 4:return a=e.sent,e.next=7,a.json();case 7:return s=e.sent,a=null,e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ht(){return _t.apply(this,arguments)}function _t(){return(_t=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/customers/expand/monthly/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,!1===t.is_staff&&(n=n.filter((function(e){return e.depot===t.depot}))),r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function jt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=Object(_.a)(m.a.mark((function e(t,r){var n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/customers/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(n.token)}});case 4:return a=e.sent,e.next=7,a.json();case 7:return s=e.sent,!1===n.is_staff&&(s=s.filter((function(e){return e.name===n.depot}))),a=null,e.abrupt("return",s);case 13:throw e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function bt(){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/customers/expand/1/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ft(){return xt.apply(this,arguments)}function xt(){return(xt=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/customers/expand/1/all/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function vt(){return yt.apply(this,arguments)}function yt(){return(yt=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/customers/expand/1/month/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Tt(){return At.apply(this,arguments)}function At(){return(At=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,Be.getState().auth_reducer.token.depot_id,e.prev=2,e.next=5,fetch("https://opl.azurewebsites.net/depots/products/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 5:return r=e.sent,e.next=8,r.json();case 8:return n=e.sent,r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(2),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Dt(){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("in antry api"),t=Be.getState().auth_reducer.token,e.prev=2,e.next=5,fetch("https://opl.azurewebsites.net/orders/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 5:return r=e.sent,e.next=8,r.json();case 8:return n=e.sent,!1===t.is_staff&&(console.log(t.depot),n=n.filter((function(e){return e.depot===t.depot}))),console.log(n),r=null,e.abrupt("return",n);case 15:throw e.prev=15,e.t0=e.catch(2),console.log(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function gt(){return Et.apply(this,arguments)}function Et(){return(Et=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/depots/main/bi/".concat(t.data.id,"/"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t.token)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Nt(){return St.apply(this,arguments)}function St(){return(St=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,Be.getState().auth_reducer.token.depot_id,e.prev=2,e.next=5,fetch("https://opl.azurewebsites.net/depots/bi/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 5:return r=e.sent,e.next=8,r.json();case 8:return n=e.sent,r=null,e.abrupt("return",n);case 13:throw e.prev=13,e.t0=e.catch(2),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function It(){return wt.apply(this,arguments)}function wt(){return(wt=Object(_.a)(m.a.mark((function e(){var t,r,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,console.log(Be.getState().auth_reducer.token),r=Be.getState().auth_reducer.token.depot_id,e.prev=3,e.next=6,fetch("https://opl.azurewebsites.net/depots/".concat(r,"/product_bi/"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 6:return n=e.sent,e.next=9,n.json();case 9:return a=e.sent,n=null,e.abrupt("return",a);case 14:throw e.prev=14,e.t0=e.catch(3),console.log(e.t0),e.t0;case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}function kt(){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(_.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/orders/customer_bi/",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return n=e.sent,r=null,e.abrupt("return",n);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Pt(e,t,r){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(_.a)(m.a.mark((function e(t,r,n){var a,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/customers/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(a)},body:JSON.stringify({depot:parseInt(n),name:t,location:r})});case 4:return s=e.sent,e.next=7,s.json();case 7:return o=e.sent,s=null,e.abrupt("return",o);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Ut(e,t,r,n,a,s,o,c){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(_.a)(m.a.mark((function e(t,r,n,a,s,o,c,i){var u,l,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/orders/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(u)},body:JSON.stringify({product:parseInt(t),truck:r,entry_no:n,order_no:a,date:s,vol_obs:o,vol_20:c,selling_price:i})});case 4:return l=e.sent,e.next=7,l.json();case 7:return p=e.sent,l=null,e.abrupt("return",p);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function zt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=Object(_.a)(m.a.mark((function e(t,r){var n,a,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("file",t),e.next=5,fetch("https://opl.azurewebsites.net/depots/".concat(r,"/upload_excel/"),{method:"POST",headers:{},body:n});case 5:return a=e.sent,e.next=8,a.json();case 8:return s=e.sent,a=null,e.abrupt("return",s);case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Yt(e,t,r,n,a,s,o,c,i){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(_.a)(m.a.mark((function e(t,r,n,a,s,o,c,i,u){var l,p,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/orders/update/".concat(t,"/"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(l)},body:JSON.stringify({product:r,truck:n,entry_no:a,order_no:s,date:o,vol_obs:c,vol_20:i,selling_price:u})});case 4:return p=e.sent,e.next=7,p.json();case 7:return d=e.sent,p=null,e.abrupt("return",d);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Gt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(_.a)(m.a.mark((function e(t,r){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Be.getState().auth_reducer.token.token,e.prev=1,e.next=4,fetch("https://opl.azurewebsites.net/orders/update/".concat(t,"/"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Token ".concat(n)}});case 4:return e.abrupt("return",r);case 7:throw e.prev=7,e.t0=e.catch(1),console.log(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}var Xt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe().then((function(e){t({type:I,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Wt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je().then((function(e){t({type:k,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Jt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe().then((function(e){t({type:R,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Kt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe().then((function(e){t({type:P,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},qt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze().then((function(e){t({type:M,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Vt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt().then((function(e){t({type:U,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Qt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt().then((function(e){t({type:F,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$t=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st().then((function(e){t({type:z,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Zt=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct().then((function(e){t({type:L,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},er=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bt().then((function(e){t({type:G,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},tr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft().then((function(e){t({type:Y,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},rr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vt().then((function(e){t({type:H,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},nr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut().then((function(e){t({type:B,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ar=function(e){return function(t){t({type:X,payload:e})}},sr=function(e){return function(t){t({type:W,payload:e})}},or=function(e){return function(t){t({type:J,payload:e})}},cr=function(e){return function(t){t({type:K,payload:e})}},ir=function(e){return function(t){t({type:q,payload:e})}},ur=function(e){return function(t){t({type:V,payload:e})}},lr=function(e){return function(t){t({type:Q,payload:e})}},pr=function(e){return function(t){t({type:$,payload:e})}},dr=function(e){return function(t){t({type:Z,payload:e})}},hr=function(e){return function(t){t({type:ee,payload:e})}},_r=function(e){return function(t){t({type:te,payload:e})}},jr=function(e){return function(t){t({type:re,payload:e})}},mr=function(e){return function(t){t({type:oe,payload:e})}},br=function(e){return function(t){t({type:ce,payload:e})}},Or=function(e,t,r){return function(){var n=Object(_.a)(m.a.mark((function n(a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pt(e,t,r).then((function(t){if(t.name===e)a({type:ie,payload:t});else try{var r=t.non_field_errors;a({type:ue,payload:{"":r}})}catch(n){a({type:ue,payload:t})}})).catch((function(e){console.log(e)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt().then((function(e){t({type:le,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},xr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt().then((function(e){t({type:xe,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},vr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tt().then((function(e){t({type:ve,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},yr=function(e){return function(t){t({type:ye,payload:e})}},Tr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gt().then((function(e){t({type:Te,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ar=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt().then((function(e){t({type:Ae,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Dr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,It().then((function(e){t({type:De,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Cr=function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kt().then((function(e){t({type:Ce,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},gr=(r(278),r(1)),Er=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={spinner:!1,redirect:!1,redirect_depot:!1,email:"",password:"",show_error:!1,null_error:!1},e.addMonths=function(e,t){return e.setMonth(e.getMonth()+t),e},e.componentWillReceiveProps=function(){var t=Object(_.a)(m.a.mark((function t(r){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({spinner:!0}),r.error&&e.setState({show_error:!0,redirect:!1,redirect_depot:!1}),!r.token){t.next=77;break}if(201!==r.token.status_code){t.next=75;break}return n=new Date("30 Apr 2022"),a=new Date("30 Apr 2022"),t.next=8,e.props.UPDATE_METRIC_ACTION(!0);case 8:return t.next=10,e.props.UPDATE_DASHBOARD_PRODUCT_MONTHLY_ACTION(n.getFullYear());case 10:return t.next=12,e.props.UPDATE_DASHBOARD_DEPOT_MONTH_ACTION(13);case 12:return t.next=14,e.props.UPDATE_DASHBOARD_DEPOT_YEAR_ACTION(n.getFullYear());case 14:return t.next=16,e.props.UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION(13);case 16:return t.next=18,e.props.UPDATE_DASHBOARD_CUSTOMER_YEAR_ACTION(n.getFullYear());case 18:return t.next=20,e.props.UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION("All");case 20:return t.next=22,e.props.UPDATE_DEPOT_TIME_SERIES_YEAR_ACTION(n.getFullYear());case 22:return t.next=24,e.props.UPDATE_DEPOT_TIME_SERIES_MONTH_ACTION(13);case 24:return t.next=26,e.props.UPDATE_DEPOT_INDEX_ACTION(0);case 26:return t.next=28,e.props.UPDATE_DEPOT_CUSTOMER_YEAR_ACTION(n.getFullYear());case 28:return t.next=30,e.props.UPDATE_DEPOT_CUSTOMER_MONTH_ACTION(13);case 30:return t.next=32,e.props.UPDATE_CUSTOMER_YEAR_ACTION(n.getFullYear());case 32:return t.next=34,e.props.UPDATE_SELECTION_DATE_ACTION({endDate:n,startDate:e.addMonths(a,-1)});case 34:return t.next=36,e.props.PRODUCT_INDEX_ACTION(0);case 36:return console.log("Update end depot start"),t.next=39,e.props.DEPOT_LIST_ACTION();case 39:return t.next=41,e.props.DEPOT_CUSTOMER_LIST_ACTION();case 41:return t.next=43,e.props.DEPOT_EXPAND_DAILY_ACTION();case 43:return t.next=45,e.props.DEPOT_EXPAND_MAIN_DAILY_ACTION();case 45:return t.next=47,e.props.DEPOT_EXPAND_MONTHLY_ACTION();case 47:return t.next=49,e.props.DEPOT_TIME_SERIES_ACTION();case 49:return console.log("depot end depot product"),t.next=52,e.props.PRODUCT_LIST_ACTION();case 52:return console.log("product end customer start"),t.next=55,e.props.CUSTOMER_LIST_MONTHLY_ACTION();case 55:return t.next=57,e.props.CUSTOMER_LIST_ACTION();case 57:if(!1!==e.props.token.is_staff){t.next=68;break}return console.log("in staff"),t.next=61,e.props.DEPOT_EXPAND_DAILY_ACTION();case 61:return t.next=63,e.props.DEPOT_EXPAND_CUSTOMERS_ACTION();case 63:return t.next=65,e.props.ENTRY_LIST_ACTION();case 65:e.setState({spinner:!1,redirect_depot:!0,email:"",password:""}),t.next=75;break;case 68:return t.next=70,e.props.PRODUCT_EXPAND_DAILY_ACTION();case 70:return t.next=72,e.props.PRODUCT_EXPAND_MONTHLY_ACTION();case 72:return t.next=74,e.props.CUSTOMER_EXPAND_ALL_ACTION();case 74:e.setState({spinner:!1,redirect:!0,email:"",password:""});case 75:t.next=78;break;case 77:e.setState({spinner:!1});case 78:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(_.a)(m.a.mark((function t(r){var n,a,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=e.state,a=n.email,s=n.password,""!==a&&""!==s){t.next=6;break}e.setState({null_error:!0}),t.next=9;break;case 6:return e.setState({spinner:!0}),t.next=9,e.props.GET_TOKEN_ACTION(a,s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.componentWillMount=Object(_.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.GET_TOKEN_ERROR_REMOVE_ACTION();case 2:e.setState({show_error:!1,null_error:!1});case 3:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return this.state.redirect?Object(gr.jsx)(h.a,{to:"/"}):this.state.redirect_depot?Object(gr.jsx)(h.a,{to:"/depots"}):Object(gr.jsx)(b.a,{children:Object(gr.jsxs)(O.a,{className:"login-row",children:[this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{ariaLabel:"Please wait as we log you in ...",color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):null,Object(gr.jsx)(f.a,{className:"logo-col",children:Object(gr.jsx)("img",{src:"https://opl.azurewebsites.net/static/opl_logo.png",alt:"logo"})}),Object(gr.jsxs)(f.a,{xs:7,className:"form-col",children:[Object(gr.jsxs)("div",{className:"title-div",children:[Object(gr.jsx)("h3",{children:"Sign in To The Dashboard"}),Object(gr.jsx)("p",{children:"Enter your email and password to sign in."})]}),this.state.null_error?Object(gr.jsx)(x.a,{variant:"danger",children:"The fields should not be empty"}):null,this.props.error&&this.state.show_error?Object.keys(this.props.error).map((function(t,r){return Object(gr.jsxs)(x.a,{variant:"danger",children:[t,": ",e.props.error[t][0]]},r)})):null,Object(gr.jsxs)(v.a,{onSubmit:this.onSubmit,children:[Object(gr.jsx)(v.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Enter email",className:"input",onChange:function(t){return e.setState({email:t.target.value,show_error:!1,null_error:!1})}})}),Object(gr.jsx)(v.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(gr.jsx)(v.a.Control,{type:"password",placeholder:"Password",className:"input",onChange:function(t){return e.setState({password:t.target.value,show_error:!1,null_error:!1})}})}),Object(gr.jsx)(y.a,{variant:"primary",type:"submit",className:"submit",children:"Submit"})]})]})]})})}}]),r}(n.Component),Nr={MAIN_BI_LIST_ACTION:Tr,GET_TOKEN_ACTION:function(e,t){return function(){var r=Object(_.a)(m.a.mark((function r(n){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A(e,t).then((function(e){if(console.log(e),void 0!==e.token)n({type:ne,payload:e});else try{var t=e.non_field_errors;n({type:ae,payload:{"":t}})}catch(r){n({type:ae,payload:e})}})).catch((function(e){console.log(e)}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},CUSTOMER_LIST_ACTION:fr,PRODUCT_LIST_ACTION:vr,PRODUCT_EXPAND_ACTION:Qt,CUSTOMER_EXPAND_ACTION:er,BI_LIST_ACTION:Ar,PRODUCT_BI_LIST_ACTION:Dr,ENTRY_LIST_ACTION:xr,CUSTOMER_BI_LIST_ACTION:Cr,PRODUCT_INDEX_ACTION:yr,GET_TOKEN_ERROR_REMOVE_ACTION:function(){return function(e){e({type:se,payload:null})}},UPDATE_SELECTION_DATE_ACTION:mr,DEPOT_CUSTOMER_LIST_ACTION:function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt().then((function(e){t({type:w,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},DEPOT_EXPAND_ACTION:Wt,UPDATE_DASHBOARD_PRODUCT_MONTHLY_ACTION:ar,DEPOT_TIME_SERIES_ACTION:nr,UPDATE_DASHBOARD_DEPOT_MONTH_ACTION:or,UPDATE_DASHBOARD_DEPOT_YEAR_ACTION:sr,UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION:ir,UPDATE_DASHBOARD_CUSTOMER_YEAR_ACTION:cr,UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION:ur,UPDATE_DEPOT_TIME_SERIES_YEAR_ACTION:lr,UPDATE_DEPOT_TIME_SERIES_MONTH_ACTION:pr,UPDATE_DEPOT_INDEX_ACTION:dr,UPDATE_DEPOT_CUSTOMER_MONTH_ACTION:hr,UPDATE_DEPOT_CUSTOMER_YEAR_ACTION:_r,UPDATE_CUSTOMER_YEAR_ACTION:jr,DEPOT_EXPAND_DAILY_ACTION:Jt,DEPOT_EXPAND_MAIN_DAILY_ACTION:qt,DEPOT_EXPAND_CUSTOMERS_ACTION:Vt,DEPOT_EXPAND_MONTHLY_ACTION:Kt,PRODUCT_EXPAND_DAILY_ACTION:Zt,PRODUCT_EXPAND_MONTHLY_ACTION:$t,CUSTOMER_EXPAND_ALL_ACTION:tr,CUSTOMER_EXPAND_MONTH_ACTION:rr,UPDATE_METRIC_ACTION:br,DEPOT_LIST_ACTION:Xt,CUSTOMER_LIST_MONTHLY_ACTION:function(){return function(){var e=Object(_.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ht().then((function(e){t({type:pe,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Sr=Object(c.b)((function(e){return{token:e.auth_reducer.token,error:e.auth_reducer.login_error?e.auth_reducer.login_error:null}}),Nr)(Er),Ir=r(22),wr=(r(159),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={spinner:!1},e.componentWillReceiveProps=function(t){t.entries.length>0&&e.setState({spinner:!1})},e.handleRefresh=Object(_.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({spinner:!0}),t.next=3,e.props.DEPOT_EXPAND_MONTHLY_ACTION();case 3:return t.next=5,e.props.DEPOT_EXPAND_DAILY_ACTION();case 5:return t.next=7,e.props.DEPOT_EXPAND_MAIN_DAILY_ACTION();case 7:return t.next=9,e.props.DEPOT_EXPAND_CUSTOMERS_ACTION();case 9:return t.next=11,e.props.DEPOT_TIME_SERIES_ACTION();case 11:return t.next=13,e.props.PRODUCT_EXPAND_MONTHLY_ACTION();case 13:return t.next=15,e.props.PRODUCT_EXPAND_DAILY_ACTION();case 15:return t.next=17,e.props.CUSTOMER_EXPAND_ALL_ACTION();case 17:return t.next=19,e.props.CUSTOMER_EXPAND_MONTH_ACTION();case 19:return t.next=21,e.props.PRODUCT_LIST_ACTION();case 21:return t.next=23,e.props.CUSTOMER_LIST_ACTION();case 23:return t.next=25,e.props.ENTRY_LIST_ACTION();case 25:case"end":return t.stop()}}),t)}))),e.componentWillMount=function(){},e}return Object(u.a)(r,[{key:"render",value:function(){return console.log(this.state.spinner),Object(gr.jsxs)("div",{className:"header",children:[Object(gr.jsx)("h5",{children:this.props.headerTitle}),Object(gr.jsxs)("div",{className:"left",children:[Object(gr.jsxs)(y.a,{variant:"secondary",size:"sm",children:[this.props.first_name[0],this.props.last_name[0]]}),Object(gr.jsxs)("p",{className:"header-name",children:[this.props.first_name," ",this.props.last_name]})]})]})}}]),r}(a.a.Component)),kr={PRODUCT_EXPAND_MONTHLY_ACTION:$t,PRODUCT_EXPAND_DAILY_ACTION:Zt,CUSTOMER_LIST_ACTION:fr,DEPOT_LIST_ACTION:Xt,DEPOT_EXPAND_CUSTOMERS_ACTION:Vt,DEPOT_EXPAND_DAILY_ACTION:Jt,DEPOT_EXPAND_MAIN_DAILY_ACTION:qt,DEPOT_EXPAND_MONTHLY_ACTION:Kt,CUSTOMER_EXPAND_ALL_ACTION:tr,CUSTOMER_EXPAND_MONTH_ACTION:rr,PRODUCT_LIST_ACTION:vr,DEPOT_TIME_SERIES_ACTION:nr,ENTRY_LIST_ACTION:xr},Rr=Object(c.b)((function(e){return{token:e.auth_reducer.token,customer_expand_month:e.list_reducer.customer_expand_month?e.list_reducer.customer_expand_month:[],entries:e.list_reducer.entries?e.list_reducer.entries:[],customer_expand:e.list_reducer.customer_expand?e.list_reducer.customer_expand:{},product_expand:e.list_reducer.product_expand?e.list_reducer.product_expand:[]}}),kr)(wr),Pr=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={dashboard:"success",products:"transparent",orders:"transparent",customers:"transparent",redirect:!1},e.handleClick=function(t){var r=["dashboard","products","orders","customers"].filter((function(e,r,n){return e!==t}));e.setState({btn:"success"}),r.map((function(t){e.setState({link:"transparent"})}))},e.handleLogOut=function(){e.props.USER_LOGGED_OUT_ACTION(),e.setState({redirect:!0})},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.state;e.dashboard,e.products,e.orders,e.customers;return this.state.redirect?Object(gr.jsx)(h.a,{to:"/login"}):Object(gr.jsxs)(b.a,{fluid:!0,className:"main",children:[Object(gr.jsxs)("div",{className:"side",children:[Object(gr.jsx)(d.b,{to:"/",className:"logo",children:Object(gr.jsx)("img",{src:"https://opl.azurewebsites.net/static/opl_logo.png"})}),Object(gr.jsxs)("div",{className:"links",children:[!0===this.props.token.is_staff?Object(gr.jsx)(d.c,{to:"/",exact:!0,className:"button",children:Object(gr.jsxs)("h6",{children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.d,{size:20,color:"#D04D30"})}),"Dashboard"]})}):null,Object(gr.jsx)(d.c,{to:"/depots",className:"button",children:Object(gr.jsxs)("h6",{children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.a,{})}),"Depots"]})}),Object(gr.jsx)(d.c,{to:"/orders",className:"button",children:Object(gr.jsxs)("h6",{children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.k,{})}),"Sales"]})}),Object(gr.jsx)(d.c,{to:"/customers",className:"button",children:Object(gr.jsxs)("h6",{children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.m,{})}),"Customers"]})}),Object(gr.jsx)(y.a,{variant:"transparent",className:"button logout",onClick:this.handleLogOut,children:Object(gr.jsxs)("h6",{children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.h,{})}),"Log Out"]})})]})]}),Object(gr.jsxs)("div",{className:"component",children:[this.props.token?Object(gr.jsx)(Rr,{headerTitle:this.props.headerTitle,first_name:this.props.token.data.first_name,last_name:this.props.token.data.last_name}):Object(gr.jsx)(Rr,{headerTitle:this.props.headerTitle,first_name:"Hashim",last_name:"Athman"}),this.props.children]})]})}}]),r}(a.a.Component),Mr={USER_LOGGED_OUT_ACTION:function(){return function(e){e({type:Ne,payload:null})}}},Ur=Object(c.b)((function(e){return{token:e.auth_reducer.token}}),Mr)(Pr),Lr=r(33),zr=r(67),Fr=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={year:parseInt(e.props.update_depot_time_series_year),month:parseInt(e.props.update_depot_time_series_month)},e.componentWillReceiveProps=function(t){e.setState({year:parseInt(t.update_depot_time_series_year),month:parseInt(t.update_depot_time_series_month)})},e.handleYearChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DEPOT_TIME_SERIES_YEAR_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMonthChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DEPOT_TIME_SERIES_MONTH_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object(gr.jsxs)("div",{className:"pie-select-div",children:[Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Year"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleYearChange(t.target.value)},children:[Object(gr.jsx)("option",{children:this.state.year}),[2022,2021].map((function(t){return parseInt(e.state.year)===t?null:Object(gr.jsx)("option",{value:t,children:t})}))]})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Month"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleMonthChange(t.target.value)},children:[13===this.state.month?null:Object(gr.jsx)("option",{value:this.state.month,children:t[parseInt(this.state.month)]}),Object(gr.jsx)("option",{value:13,children:"All"}),t.map((function(t,r){return parseInt(e.state.month)===r?null:Object(gr.jsx)("option",{value:r,children:t})}))]})]})]})}}]),r}(a.a.Component),Yr={UPDATE_DEPOT_TIME_SERIES_MONTH_ACTION:pr,UPDATE_DEPOT_TIME_SERIES_YEAR_ACTION:lr},Hr=Object(c.b)((function(e){return{update_depot_time_series_year:e.update_reducer.update_depot_time_series_year,update_depot_time_series_month:e.update_reducer.update_depot_time_series_month}}),Yr)(Fr),Gr=r(4),Br=r(24),Xr=r.n(Br),Wr=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).mapYears=function(e,t){var r=e.filter((function(e){return parseInt(e.year)===parseInt(t)}));console.log(t);for(var n=r[0].values,a=[],s=0;s<n.length;s++)a.push({name:n[s].name,data:n[s].values});return a},n.mapMonths=function(e,t,r){var n=e.filter((function(e){return parseInt(e.year)===parseInt(t)}));console.log(n);for(var a=n[0].values.filter((function(e){return parseInt(e.month)===parseInt(r)+1})),s=[],o=0;o<a.length;o++)s.push({name:a[o].name,data:a[o].values});return s},n.update=function(e){var t=null;13===parseInt(e.update_depot_time_series_month)?(t=e.dashboard_metric?e.depot_time_series.years_revenue:e.depot_time_series.years_quantity,n.setState({series:n.mapYears(t,e.update_depot_time_series_year)})):(t=e.dashboard_metric?e.depot_time_series.months_revenue:e.depot_time_series.months_quantity,n.setState({series:n.mapMonths(t,e.update_depot_time_series_year,e.update_depot_time_series_month)})),n.setState((function(t){return Object(Gr.a)(Object(Gr.a)({},t.options),{},{options:Object(Gr.a)(Object(Gr.a)({},t.options.xaxis),{},{xaxis:{categories:e.depot_time_series.depots},tooltip:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip),{},{y:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip.y),{},{formatter:e.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}})})})})}))},n.componentWillReceiveProps=function(e){n.update(e)},n.componentDidMount=function(){n.update(n.props)},n.state={series:[],options:{chart:{type:"bar",height:430},plotOptions:{bar:{horizontal:!1,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,offsetX:-6,style:{fontSize:"12px",colors:["#fff"]}},stroke:{show:!0,width:1,colors:["#fff"]},title:{text:n.props.dashboard_metric?"Depots Comparison by Revenue":"Depots Comparison by Quantity"},yaxis:{title:{text:n.props.dashboard_metric?"Kshs (Millions)":"Litres"},min:0},tooltip:{shared:!0,intersect:!1,y:{formatter:n.props.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}}},xaxis:{categories:[]}}},n}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"bar",height:380})})}}]),r}(a.a.Component),Jr=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={year:e.props.update_dashboard_customer_year,month:parseInt(e.props.update_dashboard_customer_month),products:e.props.products,product:e.props.update_dashboard_customer_product,depot:parseInt(e.props.update_depot_index)},e.componentWillReceiveProps=function(t){e.setState({year:t.update_dashboard_customer_year,month:parseInt(t.update_dashboard_customer_month),product:t.update_dashboard_customer_product,depot:parseInt(t.update_depot_index)})},e.handleYearChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_YEAR_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMonthChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleProductChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDepotChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DEPOT_INDEX_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=(this.state.products,this.props.depots);return Object(gr.jsx)("div",{className:"pie-select-div",children:Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Depot"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleDepotChange(t.target.value)},children:[Object(gr.jsx)("option",{value:this.state.depot,children:t[this.state.depot].name}),t.map((function(t,r){return e.state.depot===r?null:Object(gr.jsx)("option",{value:r,children:t.name})}))]})]})})}}]),r}(a.a.Component),Kr={UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION:ir,UPDATE_DASHBOARD_CUSTOMER_YEAR_ACTION:cr,UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION:ur,UPDATE_DEPOT_INDEX_ACTION:dr},qr=Object(c.b)((function(e){return{update_dashboard_customer_month:e.update_reducer.update_dashboard_customer_month,update_dashboard_customer_year:e.update_reducer.update_dashboard_customer_year,update_dashboard_customer_product:e.update_reducer.update_dashboard_customer_product,update_depot_index:e.update_reducer.update_depot_index,products:e.list_reducer.products,depots:e.list_reducer.depot_list}}),Kr)(Jr),Vr=r(42),Qr=r.n(Vr),$r=new Date("28 Feb 2022"),Zr=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).addMonths=function(e,t){return e.setMonth(e.getMonth()+t),e},n.mapMax=function(e){for(var t=[],r=0;r<e.length;r++)t.push(parseFloat(e[r].sum));return Math.max.apply(null,t)},n.componentWillReceiveProps=function(e){var t=e.depot_expand_daily[parseInt(e.update_depot_index)],r=[],a=e.dashboard_metric?t.revenue_daily:t.quantity_daily;r=r.concat({name:t.name,data:n.mapData(a)}),n.setState((function(t){return{series:r,options:Object(Gr.a)(Object(Gr.a)({},t.options),{},{title:Object(Gr.a)(Object(Gr.a)({},t.options.title),{},{text:e.dashboard_metric?"Revenue":"Quantities"}),xaxis:Object(Gr.a)(Object(Gr.a)({},t.options.xaxis),{},{min:e.selection_dates.startDate.getTime(),max:e.selection_dates.endDate.getTime()}),yaxis:Object(Gr.a)(Object(Gr.a)({},t.options.yaxis),{},{title:Object(Gr.a)(Object(Gr.a)({},t.options.yaxis.title),{},{text:e.dashboard_metric?"Kshs (Millions)":"Litres"})}),tooltip:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip),{},{y:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip.y),{},{formatter:e.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}})})})}})),Qr.a.exec("area-datetime","zoomX",e.selection_dates.startDate.getTime(),e.selection_dates.endDate.getTime())},n.mapData=function(e){for(var t=[],r=0;r<e.length;r++)t.push([e[r].timestamp,e[r].sum]);return t},n.componentDidMount=function(){var e=n.props.depot_expand_daily[parseInt(n.props.update_depot_index)],t=[],r=n.props.dashboard_metric?e.revenue_daily:e.quantity_daily;t=t.concat({name:e.name,data:n.mapData(r)}),n.setState({series:t,timeline:"one_month"})},n.state={series:[],options:{chart:{id:"area-datetime",type:"area",height:400,zoom:{autoScaleYaxis:!0}},title:{text:n.props.dashboard_metric?"Revenue":"Quantities"},annotations:{xaxis:[{x:n.props.selection_dates.startDate.getTime(),borderColor:"#999",yAxisIndex:0}]},dataLabels:{enabled:!0},markers:{size:0,style:"hollow"},xaxis:{type:"datetime",min:n.props.selection_dates.startDate.getTime(),max:n.props.selection_dates.endDate.getTime(),tickAmount:5},yaxis:{title:{text:"Kshs (Millions)"},min:0},tooltip:{x:{format:"dd MMM yyyy"},y:{formatter:n.props.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}}}},selection:"one_month"},n}return Object(u.a)(r,[{key:"updateData",value:function(e){this.setState({selection:e});new Date("1 ".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][$r.getMonth()]," ").concat($r.getFullYear()));var t=new Date("28 Feb 2022");t=this.addMonths(t,-6);var r=new Date("28 Feb 2022");r=this.addMonths(r,-12)}},{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",children:Object(gr.jsx)("div",{id:"chart-timeline",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"area",height:400})})})}}]),r}(a.a.Component),en=new Date("28 Feb 2022"),tn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).addMonths=function(e,t){return e.setMonth(e.getMonth()+t),e},n.mapData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[],s=[];n.mapMax(e,t,r);for(var o=0;o<e.length;o++){if(!1===isNaN(e[o].sum)&&e){var c=e.filter((function(e){return e.timestamp>=t&&e.timestamp<=r}));s.push(n.mapMax(c))}a.push([e[o].timestamp,e[o].sum])}return[a,Math.max.apply(null,s)]},n.mapMax=function(e){for(var t=[],r=0;r<e.length;r++)t.push(parseFloat(e[r].sum));return Math.max.apply(null,t)},n.componentWillReceiveProps=function(e){var t=e.depot_expand_main_daily[parseInt(e.update_depot_index)];t=e.dashboard_metric?t.depot_revenue_daily:t.depot_quantity_daily;for(var r=[],a=[],s=0;s<t.length;s++){var o=t[s].values,c=n.mapData(o,e.selection_dates.startDate.getTime(),e.selection_dates.endDate.getTime());a.push(c[1]),r=r.concat({name:t[s].name,data:c[0]})}n.setState((function(t){return{series:r,options:Object(Gr.a)(Object(Gr.a)({},t.options),{},{title:Object(Gr.a)(Object(Gr.a)({},t.options.title),{},{text:e.dashboard_metric?"Revenue":"Quantities"}),xaxis:Object(Gr.a)(Object(Gr.a)({},t.options.xaxis),{},{min:e.selection_dates.startDate.getTime(),max:e.selection_dates.endDate.getTime()}),yaxis:Object(Gr.a)(Object(Gr.a)({},t.options.yaxis),{},{title:Object(Gr.a)(Object(Gr.a)({},t.options.yaxis.title),{},{text:e.dashboard_metric?"Kshs (Millions)":"Litres"}),max:Math.max.apply(null,a)+1}),tooltip:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip),{},{y:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip.y),{},{formatter:e.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}})})})}})),Qr.a.exec("area-datetime","zoomX",e.selection_dates.startDate.getTime(),e.selection_dates.endDate.getTime())},n.componentDidMount=function(){try{var e=n.props.depot_expand_main_daily[parseInt(n.props.update_depot_index)];e=n.props.dashboard_metric?e.depot_revenue_daily:e.depot_quantity_daily;for(var t=[],r=0;r<e.length;r++){var a=e[r].values;t=t.concat({name:e[r].name,data:n.mapData(a)[0]})}n.setState({series:t,timeline:"one_month"})}catch(s){}},n.state={series:[],options:{chart:{id:"area-datetime",type:"area",height:400,zoom:{autoScaleYaxis:!0}},title:{text:n.props.dashboard_metric?"Revenue":"Quantities"},annotations:{xaxis:[{x:n.props.selection_dates.startDate.getTime(),borderColor:"#999",yAxisIndex:0}]},dataLabels:{enabled:!0},markers:{size:0,style:"hollow"},xaxis:{type:"datetime",min:n.props.selection_dates.startDate.getTime(),max:n.props.selection_dates.endDate.getTime(),tickAmount:5},yaxis:{title:{text:"Kshs (Millions)"},min:0},tooltip:{x:{format:"dd MMM yyyy"},y:{formatter:n.props.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}}}},selection:"one_month"},n}return Object(u.a)(r,[{key:"updateData",value:function(e){this.setState({selection:e});new Date("1 ".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][en.getMonth()]," ").concat(en.getFullYear()));var t=new Date("28 Feb 2022");t=this.addMonths(t,-6);var r=new Date("28 Feb 2022");r=this.addMonths(r,-12)}},{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",children:Object(gr.jsx)("div",{id:"chart-timeline",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"area",height:400})})})}}]),r}(a.a.Component),rn=tn,nn=r(432),an=r(429),sn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={customers:[],active:1},e.componentWillReceiveProps=function(t){e.update(t)},e.update=function(t){try{for(var r=t.depot_expand_customers[t.update_depot_index].customers,n=[],a=0;a<r.length;a++){var s=r[a].quantity_monthly,o=r[a].revenue_monthly,c=s.filter((function(e){return parseInt(e.year)===parseInt(t.update_depot_customer_year)}));c=c[0];var i=o.filter((function(e){return parseInt(e.year)===parseInt(t.update_depot_customer_year)}));i=i[0];var u=0,l=0,p=0;if(13===parseInt(t.update_depot_customer_month))u=i.orders,l=c.total,p=i.total;else{var d=i.data.filter((function(e){return parseInt(e.month)===parseInt(t.update_depot_customer_month)})),h=c.data.filter((function(e){return parseInt(e.month)===parseInt(t.update_depot_customer_month)}));d.length>0&&h.length>0&&(u=h[0].orders,l=h[0].total,p=d[0].total)}n.push({name:i.name,orders:u,revenue:p,quantity:l})}e.setState({customers:n})}catch(_){}},e.componentDidMount=function(){e.update(e.props)},e}return Object(u.a)(r,[{key:"render",value:function(){for(var e=this,t=this.state.customers,r=[],n=this.state.active,a=8*(n-1),s=8*n,o=function(t){r.push(Object(gr.jsx)(nn.a.Item,{active:t===n,onClick:function(){return e.setState({active:t})},children:t},t))},c=1;c<=Math.ceil(t.length/8);c++)o(c);return Object(gr.jsxs)("div",{className:"order-table",children:[Object(gr.jsx)("h6",{children:"Depot Customers"}),Object(gr.jsxs)(an.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(gr.jsx)("thead",{children:Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("th",{}),Object(gr.jsx)("th",{children:"Name"}),Object(gr.jsx)("th",{children:"No Orders"}),Object(gr.jsx)("th",{children:"Revenue (Millions)"}),Object(gr.jsx)("th",{children:"Quantity"})]})}),Object(gr.jsx)("tbody",{children:t.slice(a,s).map((function(e,t){return Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("td",{children:a+t+1}),Object(gr.jsx)("td",{children:e.name}),Object(gr.jsx)("td",{children:e.orders}),Object(gr.jsx)("td",{children:e.revenue}),Object(gr.jsx)("td",{children:e.quantity})]},t)}))})]}),Object(gr.jsx)(nn.a,{size:"sm",children:r})]})}}]),r}(a.a.Component),on=sn,cn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={year:e.props.update_depot_customer_year,month:e.props.update_depot_customer_month},e.componentWillReceiveProps=function(t){e.setState({year:t.update_depot_customer_year,month:t.update_depot_customer_month})},e.handleYearChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DEPOT_CUSTOMER_YEAR_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMonthChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DEPOT_CUSTOMER_MONTH_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object(gr.jsxs)("div",{className:"pie-select-div",children:[Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Year"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleYearChange(t.target.value)},children:[Object(gr.jsx)("option",{children:this.state.year}),[2022,2021].map((function(t){return parseInt(e.state.year)===t?null:Object(gr.jsx)("option",{value:t,children:t})}))]})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Month"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleMonthChange(t.target.value)},children:[13===parseInt(this.state.month)?null:Object(gr.jsx)("option",{value:this.state.month,children:t[parseInt(this.state.month)]}),Object(gr.jsx)("option",{value:13,children:"All"}),t.map((function(t,r){return parseInt(e.state.month)===r?null:Object(gr.jsx)("option",{value:r,children:t})}))]})]})]})}}]),r}(a.a.Component),un={UPDATE_DEPOT_CUSTOMER_MONTH_ACTION:hr,UPDATE_DEPOT_CUSTOMER_YEAR_ACTION:_r},ln=Object(c.b)((function(e){return{update_depot_customer_month:parseInt(e.update_reducer.update_depot_customer_month),update_depot_customer_year:parseInt(e.update_reducer.update_depot_customer_year)}}),un)(cn),pn=(a.a.Component,function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={startDate:e.props.selection_dates.startDate,endDate:e.props.selection_dates.endDate,key:"selection"},e.handleSelect=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({startDate:r.selection.startDate,endDate:r.selection.endDate}),t.next=3,e.props.UPDATE_SELECTION_DATE_ACTION({startDate:r.selection.startDate,endDate:r.selection.endDate});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.componentWillReceiveProps=function(t){e.setState({startDate:t.selection_dates.startDate,endDate:t.selection_dates.endDate})},e}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsxs)("div",{className:"charts-section",children:[!0===this.props.token.is_staff?Object(gr.jsx)(O.a,{children:Object(gr.jsx)(f.a,{children:Object(gr.jsxs)("div",{className:"chart-area",children:[Object(gr.jsx)(Hr,{}),Object(gr.jsx)(Wr,{depot_time_series:this.props.depot_time_series,update_depot_time_series_year:this.props.update_depot_time_series_year,update_depot_time_series_month:this.props.update_depot_time_series_month,dashboard_metric:this.props.dashboard_metric})]})})}):null,Object(gr.jsx)(O.a,{children:Object(gr.jsx)(f.a,{children:Object(gr.jsx)(qr,{})})}),Object(gr.jsx)(O.a,{children:Object(gr.jsx)(f.a,{children:Object(gr.jsxs)("div",{className:"chart-area",children:[this.props.token.is_staff?Object(gr.jsx)(Lr.a,{trigger:Object(gr.jsx)(y.a,{className:"input-dates",size:"sm",style:{width:300,marginBottom:20},children:Object(gr.jsxs)("div",{className:"input-display",children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.b,{color:"#D04D30",size:18})}),this.state.startDate.toDateString()," - ",this.state.endDate.toDateString(),Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.g,{size:18})})]})}),position:"bottom",children:Object(gr.jsx)(zr.DateRangePicker,{onChange:this.handleSelect,showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,ranges:[this.state],direction:"horizontal",preventSnapRefocus:!0,calendarFocus:"backwards",className:"date-range"})}):null,Object(gr.jsx)(Zr,{depot_expand_daily:this.props.depot_expand_daily,selection_dates:this.props.selection_dates,dashboard_metric:this.props.dashboard_metric,update_depot_index:this.props.update_depot_index})]})})}),Object(gr.jsxs)(O.a,{style:{marginTop:20},children:[Object(gr.jsx)(f.a,{xs:7,children:Object(gr.jsx)("div",{className:"chart-area",children:Object(gr.jsx)(rn,{depot_expand_main_daily:this.props.depot_expand_main_daily,selection_dates:this.props.selection_dates,dashboard_metric:this.props.dashboard_metric,update_depot_index:this.props.update_depot_index})})}),Object(gr.jsx)(f.a,{xs:5,children:Object(gr.jsxs)("div",{className:"chart-area",children:[Object(gr.jsx)(ln,{}),Object(gr.jsx)(on,{depot_expand_customers:this.props.depot_expand_customers,update_depot_index:this.props.update_depot_index,update_depot_customer_month:this.props.update_depot_customer_month,update_depot_customer_year:this.props.update_depot_customer_year,dashboard_metric:this.props.dashboard_metric})]})})]}),Object(gr.jsx)(O.a,{children:Object(gr.jsx)(f.a,{})})]})}}]),r}(a.a.Component)),dn={UPDATE_SELECTION_DATE_ACTION:mr},hn=Object(c.b)((function(e){return{}}),dn)(pn),_n=r(80),jn=r(106),mn=(r(299),r(300),r(56),r(301),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={product:null,truck:null,entry_no:"",order_no:"",date:new Date,vol_obs:null,vol_20:null,selling_price:null,trucks:[],products:[],spinner:!1,success:!1,null_error:!1},e.customerSelect=function(t){var r=e.props.depots[t];e.setState({trucks:r.customers,products:r.products})},e.componentWillReceiveProps=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.created_entry.entry_no!==e.state.entry_no){t.next=6;break}return t.next=3,e.props.ENTRY_LIST_ACTION();case 3:e.setState({spinner:!1,success:!0}),t.next=7;break;case 6:e.setState({spinner:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(_.a)(m.a.mark((function t(r){var n,a,s,o,c,i,u,l,p,d,h,_;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r.preventDefault(),n=e.state,a=n.product,s=n.truck,o=n.entry_no,c=n.order_no,i=n.date,u=n.vol_obs,l=n.vol_20,p=n.selling_price,d=[a,s,o,c,i,u,l,p],h=!1,_=0;_<d.length;_++)null!==d[_]&&""!==d[_]&&void 0!==d[_]||(h=!0);if(!h){t.next=9;break}e.setState({null_error:!0}),t.next=12;break;case 9:return e.setState({spinner:!0}),t.next=12,e.props.CREATE_ENTRY_ACTION(a,s,o,c,i,u,l,p);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.date,n=t.trucks,a=t.products,s=this.props.depots;return Object(gr.jsxs)("div",{className:"upload-form",children:[this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):null,Object(gr.jsx)("h4",{className:"upload-title",children:"Fill the information"}),this.state.success?Object(gr.jsx)(x.a,{variant:"success",size:"sm",children:"Entry Created successful"}):null,this.state.null_error?Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:"All the fields must be field"}):null,this.state.show_errors?Object.keys(this.props.error).map((function(t,r){return Object(gr.jsxs)(x.a,{variant:"danger",children:[t,": ",e.props.create_customer_error[t][0]]},r)})):null,Object(gr.jsxs)(v.a,{onSubmit:this.onSubmit,children:[Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Date"}),Object(gr.jsx)(v.a.Control,{type:"date",placeholder:"Date",size:"sm",value:r,onChange:function(t){return e.setState({date:t.target.value})}})]}),Object(gr.jsxs)(O.a,{style:{marginTop:0,height:"auto"},children:[Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Depot"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.customerSelect(t.target.value)},children:[Object(gr.jsx)("option",{children:"Select"}),s.map((function(e,t){return Object(gr.jsx)("option",{value:t,children:e.name})}))]})]})}),Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Customer"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({truck:t.target.value})},children:[Object(gr.jsx)("option",{children:"Select"}),n.map((function(e){return Object(gr.jsx)("option",{value:e.id,children:e.name})}))]})]})})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Product"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({product:t.target.value})},children:[Object(gr.jsx)("option",{children:"Select"}),a.map((function(e){return Object(gr.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(gr.jsx)("h6",{className:"upload-form-details",children:"Details"}),Object(gr.jsxs)(O.a,{style:{marginTop:0,height:"auto"},children:[Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Order No"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",onChange:function(t){return e.setState({order_no:t.target.value})}})]})}),Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Entry no"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",onChange:function(t){return e.setState({entry_no:t.target.value})}})]})})]}),Object(gr.jsxs)(O.a,{style:{marginTop:0,height:"auto"},children:[Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Vol OBS"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",onChange:function(t){return e.setState({vol_obs:t.target.value})}})]})}),Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Vol@20"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",onChange:function(t){return e.setState({vol_20:t.target.value})}})]})})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Selling Price"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",onChange:function(t){return e.setState({selling_price:t.target.value})}})]}),Object(gr.jsx)("div",{align:"center",children:Object(gr.jsx)(y.a,{variant:"primary",type:"submit",children:"Upload"})})]})]})}}]),r}(a.a.Component)),bn={CREATE_ENTRY_ACTION:function(e,t,r,n,a,s,o,c){return function(){var i=Object(_.a)(m.a.mark((function i(u){return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Ut(e,t,r,n,a,s,o,c).then((function(e){if(e.entry_no===r)u({type:_e,payload:e});else try{var t=e.non_field_errors;u({type:je,payload:{"":t}})}catch(n){u({type:je,payload:e})}})).catch((function(e){console.log(e)}));case 2:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()},ENTRY_LIST_ACTION:xr},On=Object(c.b)((function(e){return{created_entry:e.create_reducer.created_entry,error:e.create_reducer.create_entry_error?e.create_reducer.create_entry_error:null,depots:e.list_reducer.depot_customer_list?e.list_reducer.depot_customer_list:[],products:e.list_reducer.products?e.list_reducer.products:[]}}),bn)(mn),fn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={name:"",location:"",depot:null,spinner:!1,success:!1,null_error:!1,show_errors:!1},e.componentWillReceiveProps=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.create_customer_error){t.next=4;break}e.setState({show_errors:!0,spinner:!1}),t.next=11;break;case 4:if(r.created_customer.name!==e.state.name){t.next=10;break}return t.next=7,e.props.CUSTOMER_LIST_ACTION();case 7:e.setState({spinner:!1,success:!0,name:"",location:""}),t.next=11;break;case 10:e.setState({spinner:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(_.a)(m.a.mark((function t(r){var n,a,s,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=e.state,a=n.name,s=n.location,o=n.depot,""!==a&&""!==s&&null!==o){t.next=6;break}e.setState({null_error:!0}),t.next=9;break;case 6:return e.setState({spinner:!0}),t.next=9,e.props.CREATE_CUSTOMER_ACTION(a,s,o);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(gr.jsxs)("div",{className:"upload-form",children:[this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):null,Object(gr.jsx)("h4",{children:"Customer information"}),this.state.success?Object(gr.jsx)(x.a,{variant:"success",size:"sm",children:"Customer created successful"}):null,this.state.null_error?Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:"The fields cannot be empty"}):null,this.state.show_errors?Object.keys(this.props.error).map((function(t,r){return Object(gr.jsxs)(x.a,{variant:"danger",children:[t,": ",e.props.create_customer_error[t][0]]},r)})):null,Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Depot"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({depot:t.target.value})},children:[Object(gr.jsx)("option",{children:"Select"}),this.props.depot_list.map((function(e){return Object(gr.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(gr.jsxs)(v.a,{onSubmit:this.onSubmit,children:[Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Customer name"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Name",size:"sm",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value,success:!1,null_error:!1,show_errors:!1})}})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Location"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Name",size:"sm",value:this.state.location,onChange:function(t){return e.setState({location:t.target.value,success:!1,null_error:!1,show_errors:!1})}})]}),Object(gr.jsx)("div",{children:Object(gr.jsx)(y.a,{variant:"primary",type:"submit",size:"sm",children:"Add"})})]})]})}}]),r}(a.a.Component),xn={CREATE_CUSTOMER_ACTION:Or,CUSTOMER_LIST_ACTION:fr},vn=Object(c.b)((function(e){return{created_customer:e.create_reducer.created_customer,depot_list:e.list_reducer.depot_list,error:e.create_reducer.create_customer_error?e.create_reducer.create_customer_error:null}}),xn)(fn),yn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={file:null,spinner:!1,success:!1,show_error:!1,null_error:!1,depot:null},e.componentWillReceiveProps=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.upload_excel_error){t.next=4;break}e.setState({show_error:!0,spinner:!1}),t.next=7;break;case 4:return t.next=6,e.props.BI_LIST_ACTION();case 6:e.setState({spinner:!1,success:!0});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(_.a)(m.a.mark((function t(r){var n,a,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),n=e.state,a=n.file,s=n.depot,null!==a&&null!==s){t.next=6;break}e.setState({null_error:!0}),t.next=9;break;case 6:return e.setState({spinner:!0}),t.next=9,e.props.UPLOAD_EXCEL_ACTION(a,s);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(gr.jsxs)("div",{className:"upload-form",children:[this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):null,Object(gr.jsx)("h5",{children:"Upload File"}),this.state.success?Object(gr.jsx)(x.a,{variant:"success",size:"sm",children:"File Uploaded successful"}):null,this.state.show_error?Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:this.props.upload_excel_error.message}):null,this.state.null_error?Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:"All the field must be filled"}):null,Object(gr.jsxs)(v.a,{onSubmit:this.onSubmit,children:[Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Depot"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({depot:t.target.value})},children:[Object(gr.jsx)("option",{children:"Select"}),this.props.depot_list.map((function(e){return Object(gr.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"File"}),Object(gr.jsx)(v.a.Control,{type:"file",accept:".xlsx, .xls, .csv",placeholder:"File",size:"sm",onChange:function(t){return e.setState({file:t.target.files[0]})}})]}),Object(gr.jsx)("div",{children:Object(gr.jsx)(y.a,{variant:"primary",type:"submit",value:this.state.file,size:"sm",children:"Upload"})})]})]})}}]),r}(a.a.Component),Tn={UPLOAD_EXCEL_ACTION:function(e,t){return function(){var r=Object(_.a)(m.a.mark((function r(n){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,zt(e,t).then((function(e){"success"===e.status?n({type:Se,payload:e}):n({type:Ie,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},BI_LIST_ACTION:Ar},An=Object(c.b)((function(e){return{uploaded_excel:e.create_reducer.uploaded_excel,upload_excel_error:e.create_reducer.upload_excel_error,depot_list:e.list_reducer.depot_list}}),Tn)(yn),Dn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={name:"",location:"",depot:null,spinner:!1,success:!1,null_error:!1,show_errors:!1},e.componentWillReceiveProps=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.create_customer_error){t.next=4;break}e.setState({show_errors:!0,spinner:!1}),t.next=11;break;case 4:if(r.created_customer.name!==e.state.name){t.next=10;break}return t.next=7,e.props.CUSTOMER_LIST_ACTION();case 7:e.setState({spinner:!1,success:!0,name:"",location:""}),t.next=11;break;case 10:e.setState({spinner:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(_.a)(m.a.mark((function t(r){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),n=e.state.depot,window.open("https://opl.azurewebsites.net/depots/download/".concat(parseInt(n)),"_blank");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(gr.jsxs)("div",{className:"upload-form",children:[this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):null,Object(gr.jsx)("h4",{children:"Customer information"}),this.state.success?Object(gr.jsx)(x.a,{variant:"success",size:"sm",children:"Customer created successful"}):null,this.state.null_error?Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:"The fields cannot be empty"}):null,this.state.show_errors?Object.keys(this.props.error).map((function(t,r){return Object(gr.jsxs)(x.a,{variant:"danger",children:[t,": ",e.props.create_customer_error[t][0]]},r)})):null,Object(gr.jsxs)(v.a,{onSubmit:this.onSubmit,children:[Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Depot"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({depot:t.target.value})},children:[Object(gr.jsx)("option",{children:"Select"}),this.props.depot_list.map((function(e){return Object(gr.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(gr.jsx)("div",{children:Object(gr.jsx)(y.a,{variant:"primary",type:"submit",size:"sm",children:"Download"})})]})]})}}]),r}(a.a.Component),Cn={CREATE_CUSTOMER_ACTION:Or,CUSTOMER_LIST_ACTION:fr},gn=Object(c.b)((function(e){return{created_customer:e.create_reducer.created_customer,depot_list:e.list_reducer.depot_list,error:e.create_reducer.create_customer_error?e.create_reducer.create_customer_error:null}}),Cn)(Dn),En=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={startDate:e.props.selection_dates.startDate,endDate:e.props.selection_dates.endDate,key:"selection",dashboard_metric:e.props.dashboard_metric},e.handleMetricChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("revenue"!==r){t.next=5;break}return t.next=3,e.props.UPDATE_METRIC_ACTION(!0);case 3:t.next=7;break;case 5:return t.next=7,e.props.UPDATE_METRIC_ACTION(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSelect=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({startDate:r.selection.startDate,endDate:r.selection.endDate}),t.next=3,e.props.UPDATE_SELECTION_DATE_ACTION({startDate:r.selection.startDate,endDate:r.selection.endDate});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.componentWillReceiveProps=function(t){e.setState({startDate:t.selection_dates.startDate,endDate:t.selection_dates.endDate,dashboard_metric:t.dashboard_metric})},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(gr.jsx)("div",{className:"inputs",children:Object(gr.jsxs)("div",{className:"buttons",children:[Object(gr.jsx)(Lr.a,{trigger:Object(gr.jsx)(y.a,{className:"input-dates",size:"sm",children:Object(gr.jsxs)("div",{className:"input-display",children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.b,{color:"#D04D30",size:18})}),this.state.startDate.toDateString()," - ",this.state.endDate.toDateString(),Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.g,{size:18})})]})}),position:"bottom",children:Object(gr.jsx)(zr.DateRangePicker,{onChange:this.handleSelect,showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,ranges:[this.state],direction:"horizontal",preventSnapRefocus:!0,calendarFocus:"backwards",className:"date-range"})}),Object(gr.jsxs)("div",{className:"metrics",children:[Object(gr.jsxs)(y.a,{variant:this.state.dashboard_metric?"info":"secondary",size:"sm",className:"add-button-metric",style:{color:"black"},onClick:function(){return e.handleMetricChange("revenue")},children:[Object(gr.jsx)(jn.a,{color:"green",size:20}),"Revenue"]}),Object(gr.jsxs)(y.a,{variant:!1===this.state.dashboard_metric?"info":"secondary",size:"sm",className:"add-button-metric",style:{color:"black"},onClick:function(){return e.handleMetricChange("quantities")},children:[Object(gr.jsx)(Ir.i,{color:"orange",size:20}),"Quantities"]})]}),Object(gr.jsxs)("div",{className:"form",children:[Object(gr.jsx)(Lr.a,{contentStyle:{width:300},trigger:Object(gr.jsxs)(y.a,{variant:"secondary",size:"sm",className:"add-button",style:{color:"black"},children:[Object(gr.jsx)(Ir.c,{color:"green",size:20}),"Template"]}),position:"bottom",children:Object(gr.jsx)(gn,{})}),Object(gr.jsx)(Lr.a,{contentStyle:{width:300},trigger:Object(gr.jsxs)(y.a,{variant:"secondary",size:"sm",className:"add-button",style:{color:"black"},children:[Object(gr.jsx)(_n.a,{color:"green",size:20}),"Upload"]}),position:"bottom center",children:Object(gr.jsx)(An,{})}),Object(gr.jsx)(Lr.a,{contentStyle:{width:300},trigger:Object(gr.jsxs)(y.a,{variant:"info",size:"sm",className:"add-button",children:[Object(gr.jsx)(Ir.j,{color:"#e9e7ec",size:20}),"Customer"]}),position:"bottom center",children:Object(gr.jsx)(vn,{})}),Object(gr.jsx)(Lr.a,{contentStyle:{width:500,minHeight:400},trigger:Object(gr.jsxs)(y.a,{variant:"primary",size:"sm",className:"add-button",children:[Object(gr.jsx)(Ir.j,{color:"#e9e7ec",size:20}),"Add Order"]}),position:"left top",children:Object(gr.jsx)(On,{})})]})]})})}}]),r}(a.a.Component),Nn={UPDATE_SELECTION_DATE_ACTION:mr,UPDATE_METRIC_ACTION:br},Sn=Object(c.b)((function(e){return{selection_dates:e.list_reducer.selection_dates,dashboard_metric:e.list_reducer.dashboard_metric}}),Nn)(En),In=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1,spinner:!1,didnt_load:!1},e.componentWillReceiveProps=function(t){t.depot_expand_daily?e.setState({spinner:!1,didnt_load:!1}):e.setState({spinner:!1,didnt_load:!0})},e.componentWillMount=Object(_.a)(m.a.mark((function t(){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0!==(r=e.props.token)&&""!==r||e.setState({redirect:!0}),t.next=4,e.props.DEPOT_LIST_ACTION();case 4:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"render",value:function(){return this.state.redirect?Object(gr.jsx)(h.a,{to:"/login"}):(console.log(this.props.depot_expand_daily),Object(gr.jsxs)(Ur,{headerTitle:"DEPOTS",children:[!1===this.props.token.is_staff?Object(gr.jsx)(Sn,{depot_id:1}):null,this.state.didnt_load?Object(gr.jsx)("div",{children:Object(gr.jsx)(x.a,{variant:"info",size:"sm",children:"Nothing to show now. Until data is uploaded"})}):Object(gr.jsx)("div",{children:this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):Object(gr.jsx)("div",{children:Object(gr.jsx)(hn,{token:this.props.token,depot_expand_daily:this.props.depot_expand_daily,depot_expand_customers:this.props.depot_expand_customers,depot_expand_main_daily:this.props.depot_expand_main_daily,depot_time_series:this.props.depot_time_series,update_depot_time_series_month:this.props.update_depot_time_series_month,update_depot_time_series_year:this.props.update_depot_time_series_year,dashboard_metric:this.props.dashboard_metric,selection_dates:this.props.selection_dates,update_depot_index:this.props.update_depot_index,update_depot_customer_month:this.props.update_depot_customer_month,update_depot_customer_year:this.props.update_depot_customer_year})})})]}))}}]),r}(a.a.Component),wn={DEPOT_EXPAND_ACTION:Wt,DEPOT_TIME_SERIES_ACTION:nr,DEPOT_LIST_ACTION:Xt},kn=Object(c.b)((function(e){return{token:e.auth_reducer.token,depot_expand_daily:e.list_reducer.depot_expand_daily?e.list_reducer.depot_expand_daily:[],depot_expand_customers:e.list_reducer.depot_expand_customers?e.list_reducer.depot_expand_customers:[],depot_expand_main_daily:e.list_reducer.depot_expand_main_daily?e.list_reducer.depot_expand_main_daily:[],depot_time_series:e.list_reducer.depot_time_series?e.list_reducer.depot_time_series:{},update_depot_time_series_year:e.update_reducer.update_depot_time_series_year,update_depot_time_series_month:e.update_reducer.update_depot_time_series_month,update_depot_index:parseInt(e.update_reducer.update_depot_index),update_depot_customer_year:e.update_reducer.update_depot_customer_year,update_depot_customer_month:e.update_reducer.update_depot_customer_month,depot_list:e.list_reducer.depot_list,dashboard_metric:e.list_reducer.dashboard_metric,selection_dates:e.list_reducer.selection_dates}}),wn)(In),Rn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={year:e.props.update_dashboard_year_product_monthly},e.componentWillReceiveProps=function(t){e.setState({year:t.update_dashboard_year_product_monthly})},e.handleYearChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_PRODUCT_MONTHLY_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(gr.jsx)("div",{children:Object(gr.jsxs)(v.a.Group,{className:"mb-4 year-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Year"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleYearChange(t.target.value)},children:[Object(gr.jsx)("option",{children:this.state.year}),[2022,2021].map((function(t){return e.state.year===t?null:Object(gr.jsx)("option",{value:t,children:t})}))]})]})})}}]),r}(a.a.Component),Pn={UPDATE_DASHBOARD_PRODUCT_MONTHLY_ACTION:ar},Mn=Object(c.b)((function(e){return{update_dashboard_year_product_monthly:e.update_reducer.update_dashboard_year_product_monthly}}),Pn)(Rn),Un=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={year:e.props.update_dashboard_depot_year,month:e.props.update_dashboard_depot_month},e.componentWillReceiveProps=function(t){e.setState({year:t.update_dashboard_depot_year,month:t.update_dashboard_depot_month})},e.handleYearChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_DEPOT_YEAR_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMonthChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_DEPOT_MONTH_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object(gr.jsxs)("div",{className:"pie-select-div",children:[Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Year"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleYearChange(t.target.value)},children:[Object(gr.jsx)("option",{children:this.state.year}),[2022,2021].map((function(t){return parseInt(e.state.year)===t?null:Object(gr.jsx)("option",{value:t,children:t})}))]})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Month"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleMonthChange(t.target.value)},children:[13===parseInt(this.state.month)?null:Object(gr.jsx)("option",{value:this.state.month,children:t[parseInt(this.state.month)]}),Object(gr.jsx)("option",{value:13,children:"All"}),t.map((function(t,r){return parseInt(e.state.month)===r?null:Object(gr.jsx)("option",{value:r,children:t})}))]})]})]})}}]),r}(a.a.Component),Ln={UPDATE_DASHBOARD_DEPOT_MONTH_ACTION:or,UPDATE_DASHBOARD_DEPOT_YEAR_ACTION:sr},zn=Object(c.b)((function(e){return{update_dashboard_depot_month:e.update_reducer.update_dashboard_depot_month,update_dashboard_depot_year:e.update_reducer.update_dashboard_depot_year}}),Ln)(Un),Fn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;Object(i.a)(this,r),(n=t.call(this,e)).componentWillReceiveProps=function(e){for(var t=e.product_expand,r=e.update_dashboard_year_product_monthly,a=[],s=0;s<t.length;s++){var o=t[s];a=a.concat({name:o.name,data:e.dashboard_metric?n.mapData(o.revenue_monthly,r):n.mapData(o.quantity_monthly,r)})}n.setState((function(t){return{series:a,options:Object(Gr.a)(Object(Gr.a)({},t.options),{},{title:Object(Gr.a)(Object(Gr.a)({},t.options.title),{},{text:e.dashboard_metric?"".concat(r," Products Trends by Month's Revenue"):"".concat(r," Products Trends by Month's Quantity")}),yaxis:Object(Gr.a)(Object(Gr.a)({},t.options.yaxis),{},{title:Object(Gr.a)(Object(Gr.a)({},t.options.yaxis.title),{},{text:e.dashboard_metric?"Kshs (Millions)":"Litres"})}),tooltip:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip),{},{y:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip.y),{},{formatter:e.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}})})})}}))},n.mapData=function(e,t){var r=e.filter((function(e){return e.year===parseInt(t)})),n=new Array(12).fill(0);for(var a in e=r[0].data){var s=e[a];n[s.month-1]=s.total}return n},n.componentDidMount=function(){for(var e=n.props.product_expand,t=n.props.update_dashboard_year_product_monthly,r=[],a=0;a<e.length;a++){var s=e[a];r=r.concat({name:s.name,data:n.props.dashboard_metric?n.mapData(s.revenue_monthly,t):n.mapData(s.quantity_monthly,t)})}console.log(r),n.setState({series:r})};var a=(new Date).getFullYear();return n.state={series:[],options:{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},title:{text:n.props.dashboard_metric?"".concat(a," Products Trends by Month's Revenue"):"".concat(a," Products Trends by Month's Quantity"),align:"left"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:n.props.product_expand[0].quantity_monthly[0].months},yaxis:{title:{text:n.props.dashboard_metric?"Kshs (Millions)":"Litres"}},fill:{opacity:1},tooltip:{y:{formatter:n.props.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}}}}},n}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",style:{marginTop:20},children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"bar",height:350})})}}]),r}(a.a.Component),Yn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).componentWillReceiveProps=function(e){for(var t=e.depot_expand,r=[],a=[],s=parseInt(e.update_dashboard_depot_year),o=parseInt(e.update_dashboard_depot_month),c=0;c<t.length;c++){var i=t[c];r.push(i.name),i=e.dashboard_metric?i.revenue_monthly:i.quantity_monthly,a.push(n.mapData(i,s,o))}n.setState((function(t){return{series:a,options:Object(Gr.a)(Object(Gr.a)({},t.options),{},{labels:r,title:Object(Gr.a)(Object(Gr.a)({},t.options.title),{},{text:e.dashboard_metric?"Depots Comparison by Revenue":"Depots Comparison by Quantity"}),tooltip:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip),{},{y:Object(Gr.a)(Object(Gr.a)({},t.options.tooltip.y),{},{formatter:e.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}})})})}}))},n.mapData=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:13,n=e.filter((function(e){return e.year===t}));e=n[0].data;var a=[0,0,0,0,0,0,0,0,0,0,0,0];console.log(n[0].total);for(var s=0;s<e.length;s++){var o=e[s];a[o.month-1]=o.total,o.total}return 13===r?n[0].total:a[r]},n.componentDidMount=Object(_.a)(m.a.mark((function e(){var t,r,a,s,o,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=n.props.depot_expand,r=[],a=[],s=parseInt(n.props.update_dashboard_depot_year),o=parseInt(n.props.update_dashboard_depot_month),c=0;c<t.length;c++)i=t[c],r.push(i.name),i=n.props.dashboard_metric?i.revenue_monthly:i.quantity_monthly,a.push(n.mapData(i,s,o));n.setState((function(e){return{series:a,options:Object(Gr.a)(Object(Gr.a)({},e.options),{},{labels:r})}}));case 7:case"end":return e.stop()}}),e)}))),n.state={series:[],options:{chart:{width:180,type:"donut"},labels:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],plotOptions:{pie:{startAngle:-90,endAngle:270}},dataLabels:{enabled:!0},fill:{type:"gradient"},tooltip:{y:{formatter:n.props.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}}},title:{text:n.props.dashboard_metric?"Depots Comparison by Revenue":"Depots Comparison by Quantity"},responsive:[{breakpoint:480,options:{chart:{width:200}}}]}},n}return Object(u.a)(r,[{key:"render",value:function(){var e=this.state.series.reduce((function(e,t){return e+t}),0);return Object(gr.jsx)("div",{id:"chart",children:0===e?Object(gr.jsx)("p",{className:"no-data",children:"No data for this year this month. Select another month or switch years"}):Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"donut",width:400})})}}]),r}(a.a.Component),Hn=Yn,Gn=new Date("28 Feb 2022"),Bn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).addMonths=function(e,t){return e.setMonth(e.getMonth()+t),e},n.mapData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[],s=[];n.mapMax(e,t,r);for(var o=0;o<e.length;o++){if(!1===isNaN(e[o].sum)&&e){var c=e.filter((function(e){return e.timestamp>=t&&e.timestamp<=r}));s.push(n.mapMax(c))}a.push([e[o].timestamp,e[o].sum])}return[a,Math.max.apply(null,s)]},n.mapMax=function(e){for(var t=[],r=0;r<e.length;r++)t.push(parseFloat(e[r].sum));return Math.max.apply(null,t)},n.update=function(e){for(var t=e.product_expand,r=[],a=[],s=0;s<t.length;s++){var o=e.dashboard_metric?t[s].revenue_daily:t[s].quantity_daily,c=n.mapData(o,e.selection_dates.startDate.getTime(),e.selection_dates.endDate.getTime());a.push(c[1]),r=r.concat({name:t[s].name,data:c[0]})}return[r,Math.max.apply(null,a)]},n.componentWillReceiveProps=function(e){var t=n.update(e);n.setState((function(r){return{series:t[0],options:Object(Gr.a)(Object(Gr.a)({},r.options),{},{title:Object(Gr.a)(Object(Gr.a)({},r.options.title),{},{text:e.dashboard_metric?"Revenue":"Quantities"}),xaxis:Object(Gr.a)(Object(Gr.a)({},r.options.xaxis),{},{min:e.selection_dates.startDate.getTime(),max:e.selection_dates.endDate.getTime()}),yaxis:Object(Gr.a)(Object(Gr.a)({},r.options.yaxis),{},{title:Object(Gr.a)(Object(Gr.a)({},r.options.yaxis.title),{},{text:e.dashboard_metric?"Kshs (Millions)":"Litres"}),max:t[1]+1}),tooltip:Object(Gr.a)(Object(Gr.a)({},r.options.tooltip),{},{y:Object(Gr.a)(Object(Gr.a)({},r.options.tooltip.y),{},{formatter:e.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}})})})}})),Qr.a.exec("area-datetime","zoomX",e.selection_dates.startDate.getTime(),e.selection_dates.endDate.getTime())},n.componentDidMount=function(){for(var e=n.props.product_expand,t=[],r=[],a=0;a<e.length;a++){var s=n.props.dashboard_metric?e[a].revenue_daily:e[a].quantity_daily,o=n.mapData(s);r.push(o[1]),t=t.concat({name:e[a].name,data:o[0]})}n.setState({series:t,timeline:"one_month"})},n.state={series:[],options:{chart:{id:"area-datetime",type:"area",height:400,zoom:{autoScaleYaxis:!0}},title:{text:n.props.dashboard_metric?"Revenue":"Quantities"},annotations:{xaxis:[{x:n.props.selection_dates.startDate.getTime(),borderColor:"#999",yAxisIndex:0}]},dataLabels:{enabled:!0},markers:{size:0,style:"hollow"},xaxis:{type:"datetime",min:n.props.selection_dates.startDate.getTime(),max:n.props.selection_dates.endDate.getTime(),tickAmount:5},yaxis:{title:{text:"Kshs (Millions)"},min:0},tooltip:{y:{formatter:n.props.dashboard_metric?function(e){return"Kshs ".concat(e," Millions")}:function(e){return"".concat(e," Litres")}}}},selection:"one_month"},n}return Object(u.a)(r,[{key:"updateData",value:function(e){this.setState({selection:e});new Date("1 ".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][Gn.getMonth()]," ").concat(Gn.getFullYear()));var t=new Date("28 Feb 2022");t=this.addMonths(t,-6);var r=new Date("28 Feb 2022");r=this.addMonths(r,-12)}},{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",className:"chart-area",children:Object(gr.jsx)("div",{id:"chart-timeline",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"area",height:400})})})}}]),r}(a.a.Component),Xn=Bn,Wn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).componentDidMount=Object(_.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n.my_ref=a.a.createRef(),n.state={data:{}},n}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.product_expand_monthly,t=this.props.product_expand_daily,r=this.props.depot_expand_monthly;return Object(gr.jsxs)("div",{className:"charts-section",children:[Object(gr.jsx)(O.a,{children:Object(gr.jsx)(f.a,{children:Object(gr.jsx)(Xn,{product_expand:t,dashboard_metric:this.props.dashboard_metric,selection_dates:this.props.selection_dates})})}),Object(gr.jsxs)(O.a,{children:[Object(gr.jsx)(f.a,{xs:7,children:Object(gr.jsxs)("div",{className:"chart-area",style:{marginTop:20},children:[Object(gr.jsx)(Mn,{}),Object(gr.jsx)(Fn,{product_expand:e,dashboard_metric:this.props.dashboard_metric,update_dashboard_year_product_monthly:this.props.update_dashboard_year_product_monthly})]})}),Object(gr.jsx)(f.a,{xs:5,children:Object(gr.jsxs)("div",{className:"chart-area",style:{marginTop:20},children:[Object(gr.jsx)(zn,{}),Object(gr.jsx)(Hn,{depot_expand:r,dashboard_metric:this.props.dashboard_metric,update_dashboard_depot_month:this.props.update_dashboard_depot_month,update_dashboard_depot_year:this.props.update_dashboard_depot_year})]})})]})]})}}]),r}(a.a.Component),Jn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={year:e.props.update_dashboard_customer_year,month:parseInt(e.props.update_dashboard_customer_month),products:e.props.products,product:e.props.update_dashboard_customer_product},e.componentWillReceiveProps=function(t){e.setState({year:t.update_dashboard_customer_year,month:parseInt(t.update_dashboard_customer_month),product:t.update_dashboard_customer_product,products:t.products})},e.handleYearChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_YEAR_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMonthChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleProductChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=["January","February","March","April","May","June","July","August","September","October","November","December"],r=this.state.products;return Object(gr.jsxs)("div",{className:"pie-select-div",children:[Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Year"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleYearChange(t.target.value)},children:[Object(gr.jsx)("option",{children:this.state.year}),[2022,2021].map((function(t){return parseInt(e.state.year)===t?null:Object(gr.jsx)("option",{value:t,children:t})}))]})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Month"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleMonthChange(t.target.value)},children:[13===this.state.month?null:Object(gr.jsx)("option",{value:this.state.month,children:t[parseInt(this.state.month)]}),Object(gr.jsx)("option",{value:13,children:"All"}),t.map((function(t,r){return parseInt(e.state.month)===r?null:Object(gr.jsx)("option",{value:r,children:t})}))]})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Product"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleProductChange(t.target.value)},children:[Object(gr.jsx)("option",{children:"All"===this.state.product?"All":this.state.product}),"All"===this.state.product?null:Object(gr.jsx)("option",{value:"All",children:"All"}),r.map((function(t){return e.state.product===t.name?null:Object(gr.jsx)("option",{value:t.name,children:t.name})}))]})]})]})}}]),r}(a.a.Component),Kn={UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION:ir,UPDATE_DASHBOARD_CUSTOMER_YEAR_ACTION:cr,UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION:ur},qn=Object(c.b)((function(e){return{update_dashboard_customer_month:e.update_reducer.update_dashboard_customer_month,update_dashboard_customer_year:e.update_reducer.update_dashboard_customer_year,update_dashboard_customer_product:e.update_reducer.update_dashboard_customer_product,products:e.list_reducer.products}}),Kn)(Jn),Vn=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={customers:[],metric:e.props.metric},e.numberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.update=function(t){var r=t.customer_expand_all.customers_rank,n=null,a=[];try{n=t.customer_expand_month.customers_rank}catch(u){e.setState({no_data:!0})}if(null===n);else{var s=r.filter((function(e){return e.year===parseInt(t.update_dashboard_customer_year)})),o=n.filter((function(e){return e.year===parseInt(t.update_dashboard_customer_year)})),c=s[0],i=o[0];if(13===parseInt(t.update_dashboard_customer_month))if("All"===t.update_dashboard_customer_product)a=t.dashboard_metric?c.customers_revenue:c.customers_quantity;else{s=i.products.filter((function(e){return e.name===t.update_dashboard_customer_product}));try{a=t.dashboard_metric?s[0].customers_revenue:s[0].customers_quantity}catch(u){a=[]}}else if(a=i.months[parseInt(t.update_dashboard_customer_month)],console.log(i.months[0]),"All"===t.update_dashboard_customer_product)a=t.dashboard_metric?a.customers_revenue:a.customers_quantity;else{s=a.products.filter((function(e){return e.name===t.update_dashboard_customer_product}));try{a=t.dashboard_metric?s[0].customers_revenue:s[0].customers_quantity}catch(u){a=[]}}}e.setState({customers:a,metric:t.dashboard_metric})},e.componentWillReceiveProps=function(t){e.update(t)},e.componentDidMount=function(){e.update(e.props)},e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(gr.jsxs)("div",{className:"chart-area",children:[Object(gr.jsx)(qn,{}),Object(gr.jsxs)("div",{className:"customer-top",children:[Object(gr.jsx)("h6",{style:{marginLeft:20},children:"Top Customers"}),Object(gr.jsxs)("div",{className:"legends",children:[Object(gr.jsx)("div",{className:"legend-item"}),Object(gr.jsx)("div",{className:"legend-item"})]})]}),Object(gr.jsxs)(O.a,{className:"customer-row",children:[this.state.customers.slice(0,8).map((function(t,r){return Object(gr.jsx)(f.a,{xs:3,children:Object(gr.jsxs)("div",{className:"customer",children:[Object(gr.jsx)("div",{className:"customer-total",children:Object(gr.jsxs)("h5",{className:"customer-amount",children:[e.state.metric?"Kshs.":"Litres."," ",e.numberWithCommas(t.amount)]})}),Object(gr.jsxs)("div",{className:"customer-info",children:[Object(gr.jsx)("div",{className:"customer-profile",children:t.increase?Object(gr.jsx)(Ir.p,{size:30,color:"green"}):Object(gr.jsx)(Ir.o,{size:30,color:"red"})}),Object(gr.jsxs)("div",{children:[Object(gr.jsx)("h6",{className:"customer-name",children:t.name}),Object(gr.jsx)("p",{className:"customer-location",children:t.location})]})]})]})},r)})),0===this.state.customers.length?Object(gr.jsx)("p",{className:"no-data",children:"No data for this year this month. Select another month or switch years"}):null]})]})}}]),r}(a.a.Component),Qn=Vn,$n=(a.a.Component,function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1,spinner:!1,didnt_load:!1},e.componentWillReceiveProps=function(t){console.log("index receive"),t.depot_expand_monthly.length>0?e.setState({spinner:!1,didnt_load:!1}):e.setState({spinner:!1,didnt_load:!0})},e.componentWillMount=Object(_.a)(m.a.mark((function t(){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.token,console.log(r),void 0!==r&&""!==r){t.next=6;break}e.setState({redirect:!0}),t.next=12;break;case 6:return t.next=8,e.props.CUSTOMER_EXPAND_MONTH_ACTION();case 8:return t.next=10,e.props.DEPOT_EXPAND_CUSTOMERS_ACTION();case 10:return t.next=12,e.props.ENTRY_LIST_ACTION();case 12:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"render",value:function(){return this.state.redirect?Object(gr.jsx)(h.a,{to:"/login"}):Object(gr.jsxs)(Ur,{headerTitle:"Dashboard",children:[Object(gr.jsx)(Sn,{depot_id:1}),this.state.didnt_load?Object(gr.jsx)("div",{children:Object(gr.jsx)(x.a,{variant:"info",size:"sm",children:"Nothing to show now. Until data is uploaded"})}):Object(gr.jsx)("div",{children:this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):Object(gr.jsxs)("div",{children:[Object(gr.jsx)(Wn,{selection_dates:this.props.selection_dates,dashboard_metric:this.props.dashboard_metric,product_expand_monthly:this.props.product_expand_monthly,product_expand_daily:this.props.product_expand_daily,depot_expand_daily:this.props.depot_expand_daily,depot_expand_monthly:this.props.depot_expand_monthly,update_dashboard_year_product_monthly:this.props.update_dashboard_year_product_monthly,update_dashboard_depot_year:this.props.update_dashboard_depot_year,update_dashboard_depot_month:this.props.update_dashboard_depot_month}),Object(gr.jsx)(Qn,{dashboard_metric:this.props.dashboard_metric,customer_expand_all:this.props.customer_expand_all,customer_expand_month:this.props.customer_expand_month,update_dashboard_customer_year:this.props.update_dashboard_customer_year,update_dashboard_customer_month:this.props.update_dashboard_customer_month,update_dashboard_customer_product:this.props.update_dashboard_customer_product})]})})]})}}]),r}(a.a.Component)),Zn={BI_LIST_ACTION:Ar,MAIN_BI_LIST_ACTION:Tr,DEPOT_LIST_ACTION:Xt,DEPOT_EXPAND_ACTION:Wt,PRODUCT_EXPAND_ACTION:Qt,CUSTOMER_EXPAND_ACTION:er,CUSTOMER_EXPAND_MONTH_ACTION:rr,DEPOT_EXPAND_CUSTOMERS_ACTION:Vt,ENTRY_LIST_ACTION:xr,UPDATE_DEPOT_INDEX_ACTION:dr},ea=Object(c.b)((function(e){return{token:e.auth_reducer.token,dashboard_metric:e.list_reducer.dashboard_metric,selection_dates:e.list_reducer.selection_dates,depot_expand_monthly:e.list_reducer.depot_expand_monthly?e.list_reducer.depot_expand_monthly:[],customer_expand_all:e.list_reducer.customer_expand_all?e.list_reducer.customer_expand_all:null,customer_expand_month:e.list_reducer.customer_expand_month?e.list_reducer.customer_expand_month:null,product_expand_monthly:e.list_reducer.product_expand_monthly?e.list_reducer.product_expand_monthly:[],product_expand_daily:e.list_reducer.product_expand_daily?e.list_reducer.product_expand_daily:[],update_dashboard_year_product_monthly:e.update_reducer.update_dashboard_year_product_monthly,update_dashboard_depot_year:e.update_reducer.update_dashboard_depot_year,update_dashboard_depot_month:e.update_reducer.update_dashboard_depot_month,update_dashboard_customer_year:e.update_reducer.update_dashboard_customer_year,update_dashboard_customer_month:e.update_reducer.update_dashboard_customer_month,update_dashboard_customer_product:e.update_reducer.update_dashboard_customer_product}}),Zn)($n),ta=r(111),ra=r.n(ta),na=ra.a.ExcelFile,aa=ra.a.ExcelFile.ExcelSheet,sa=ra.a.ExcelFile.ExcelColumn,oa=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsx)(na,{element:Object(gr.jsx)(y.a,{variant:"transparent",className:"exports",children:Object(gr.jsx)(_n.a,{size:25,color:"green"})}),children:Object(gr.jsxs)(aa,{data:this.props.entries,name:"Employees",children:[Object(gr.jsx)(sa,{label:"Date",value:"date"}),Object(gr.jsx)(sa,{label:"Order No",value:"order_no"}),Object(gr.jsx)(sa,{label:"Entry No",value:"entry_no"}),Object(gr.jsx)(sa,{label:"S.Price",value:"selling_price"}),Object(gr.jsx)(sa,{label:"OBS Vol",value:"vol_obs"}),Object(gr.jsx)(sa,{label:"Vol@20",value:"vol_20"}),Object(gr.jsx)(sa,{label:"Amount",value:"amount"})]})})}}]),r}(a.a.Component),ca=(r(148),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={startDate:new Date(e.props.order_dates.start_date),endDate:new Date(e.props.order_dates.end_date),key:"selection",date:!0,cost:!1},e.componentWillReceiveProps=function(t){e.setState({startDate:new Date(t.order_dates.start_date),endDate:new Date(t.order_dates.end_date)})},e.handleSelect=function(){var t=Object(_.a)(m.a.mark((function t(r){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({startDate:r.selection.startDate,endDate:r.selection.endDate}),n={start_date:r.selection.startDate,end_date:r.selection.endDate},t.next=4,e.props.ORDER_DATES_ACTION(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this.state.startDate,t=this.state.endDate;return Object(gr.jsx)("div",{children:Object(gr.jsx)("div",{className:"order-top",children:Object(gr.jsx)(Lr.a,{trigger:Object(gr.jsx)(y.a,{className:"input-dates",size:"sm",children:Object(gr.jsxs)("div",{className:"input-display",children:[Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.b,{color:"#D04D30",size:18})}),e.toDateString()," - ",t.toDateString(),Object(gr.jsx)("span",{children:Object(gr.jsx)(Ir.g,{size:18})})]})}),position:"bottom",children:Object(gr.jsx)(zr.DateRangePicker,{onChange:this.handleSelect,showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:2,ranges:[this.state],direction:"horizontal",preventSnapRefocus:!0,calendarFocus:"backwards",className:"date-range"})})})})}}]),r}(a.a.Component)),ia={ORDER_DATES_ACTION:function(e){return function(t){t({type:Ee,payload:e})}}},ua=Object(c.b)((function(e){var t={start_date:new Date(2022,3,20),end_date:new Date(2022,3,30)};return{order_dates:e.list_reducer.order_dates?e.list_reducer.order_dates:t,entries:e.list_reducer.entries?e.list_reducer.entries:[]}}),ia)(ca),la=r(244),pa=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={date:e.props.order.date,product:e.props.order.product,product_id:e.props.order.product_id,truck:e.props.order.customer,truck_id:e.props.order.truck,customer:e.props.order.customer,customer_changed:!1,depot:e.props.order.depot,depot_item:e.props.depots.filter((function(t){return t.name==e.props.order.depot}))[0].customers,depots:e.props.depots.filter((function(t){return t.name!==e.props.order.depot})),other_products:e.props.depots.filter((function(t){return t.name==e.props.order.depot}))[0].products.filter((function(t){return t.name!==e.props.order.product})),order_no:e.props.order.order_no,entry_no:e.props.order.entry_no?e.props.order.entry_no:"",vol_obs:e.props.order.vol_obs,vol_20:e.props.order.vol_20,selling_price:e.props.order.selling_price,spinner:!1,success:!1,null_error:!1,show_errors:!1},e.customerChange=function(t){var r=e.props.depots.filter((function(e){return e.id===parseInt(t)}))[0];console.log(r),e.setState({depot_item:r.customers,customer_changed:!0,other_products:r.products})},e.componentWillReceiveProps=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("in edit receive"),t.prev=1,r.updated_entry.entry_no!==e.state.entry_no){t.next=8;break}return t.next=5,e.props.ENTRY_LIST_ACTION();case 5:e.setState({spinner:!1,success:!0}),t.next=9;break;case 8:e.setState({spinner:!1});case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(1);case 13:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(_.a)(m.a.mark((function t(r){var n,a,s,o,c,i,u,l,p,d,h,_;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r.preventDefault(),n=e.state,a=n.product_id,s=n.truck_id,o=n.entry_no,c=n.order_no,i=n.date,u=n.vol_obs,l=n.vol_20,p=n.selling_price,d=[a,s,o,c,i,u,l,p],h=!1,_=0;_<d.length;_++)null!==d[_]&&""!==d[_]&&void 0!==d[_]||(h=!0);if(!h){t.next=9;break}e.setState({null_error:!0}),t.next=13;break;case 9:return e.setState({spinner:!0}),console.log("in edit"),t.next=13,e.props.UPDATE_ENTRY_ACTION(e.props.order.id,a,s,o,c,i,u,l,p);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.date,n=t.depot,a=t.customer_changed,s=t.customer,o=t.depots,c=(t.truck,t.product),i=t.other_products,u=t.order_no,l=t.entry_no,p=t.vol_obs,d=t.vol_20,h=t.selling_price;return Object(gr.jsxs)("div",{className:"upload-form",children:[this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):null,Object(gr.jsx)("h4",{className:"upload-title",children:"Fill the information"}),this.state.success?Object(gr.jsx)(x.a,{variant:"success",size:"sm",children:"Entry Updated Successful"}):null,this.state.null_error?Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:"All the fields must be field"}):null,this.state.show_errors?Object.keys(this.props.error).map((function(t,r){return Object(gr.jsxs)(x.a,{variant:"danger",children:[t,": ",e.props.create_customer_error[t][0]]},r)})):null,Object(gr.jsxs)(v.a,{onSubmit:this.onSubmit,children:[Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Date"}),Object(gr.jsx)(v.a.Control,{type:"date",placeholder:"Date",size:"sm",value:r,onChange:function(t){return e.setState({date:t.target.value})}})]}),Object(gr.jsxs)(O.a,{style:{marginTop:0,height:"auto"},children:[Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Depot"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.customerChange(t.target.value)},children:[Object(gr.jsx)("option",{children:n}),o.map((function(e,t){return Object(gr.jsx)("option",{value:e.id,children:e.name},t)}))]})]})}),Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Truck"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({truck_id:t.target.value})},children:[a?Object(gr.jsx)("option",{children:"Select"}):Object(gr.jsx)("option",{children:s}),this.state.depot_item.map((function(e){return Object(gr.jsx)("option",{value:e.id,children:e.name})}))]})]})})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Product"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({product_id:t.target.value})},children:[Object(gr.jsx)("option",{children:c}),i.map((function(e,t){return Object(gr.jsx)("option",{value:e.id,children:e.name},t)}))]})]}),Object(gr.jsx)("h6",{className:"upload-form-details",children:"Details"}),Object(gr.jsxs)(O.a,{style:{marginTop:0,height:"auto"},children:[Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Order No"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",value:u,onChange:function(t){return e.setState({order_no:t.target.value})}})]})}),Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Entry no"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",value:l,onChange:function(t){return e.setState({entry_no:t.target.value})}})]})})]}),Object(gr.jsxs)(O.a,{style:{marginTop:0,height:"auto"},children:[Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Vol"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",value:p,onChange:function(t){return e.setState({vol_obs:t.target.value})}})]})}),Object(gr.jsx)(f.a,{children:Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Vol@20"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",value:d,onChange:function(t){return e.setState({vol_20:t.target.value})}})]})})]}),Object(gr.jsxs)(v.a.Group,{className:"mb-2",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Selling Price"}),Object(gr.jsx)(v.a.Control,{type:"text",placeholder:"Order No",size:"sm",value:h,onChange:function(t){return e.setState({selling_price:t.target.value})}})]}),Object(gr.jsx)("div",{align:"center",children:Object(gr.jsx)(y.a,{variant:"primary",type:"submit",children:"Upload"})})]})]})}}]),r}(a.a.Component),da={UPDATE_ENTRY_ACTION:function(e,t,r,n,a,s,o,c,i){return function(){var u=Object(_.a)(m.a.mark((function u(l){return m.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Yt(e,t,r,n,a,s,o,c,i).then((function(e){if(e.entry_no===n)l({type:me,payload:e});else try{var t=e.non_field_errors;l({type:be,payload:{"":t}})}catch(r){l({type:be,payload:e})}})).catch((function(e){console.log(e)}));case 2:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}()},ENTRY_LIST_ACTION:xr},ha=Object(c.b)((function(e){return{updated_entry:e.update_reducer.updated_entry,error:e.update_reducer.update_entry_error?e.update_reducer.update_entry_error:null,depots:e.list_reducer.depot_customer_list?e.list_reducer.depot_customer_list:[],products:e.list_reducer.products?e.list_reducer.products:[]}}),da)(pa),_a=(r(421),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={orders:e.props.entries,order_no:null,active:1,spinner:!1,success:!0,delete_order:null},e.onSearchChange=function(t){var r=e.state.active,n=50*(r-1),a=50*r;""===t||void 0===t||null===t?e.setState({orders:e.props.entries.slice(n,a)}):e.setState({order_no:t})},e.onSearch=function(t){t.preventDefault();var r=e.state.order_no,n=e.props.entries;n=n.filter((function(e){return e.order_no.includes(r)})),e.setState({orders:n})},e.componentWillReceiveProps=function(){var t=Object(_.a)(m.a.mark((function t(r){var n,a,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({success:!0}),!r.deleted_entry){t.next=6;break}if(r.deleted_entry.order_no!==e.state.delete_order){t.next=6;break}return t.next=5,e.props.ENTRY_LIST_ACTION();case 5:e.setState({spinner:!1,success:!0,delete_order:null});case 6:n=r.entries,a=new Date(r.order_dates.start_date),s=new Date(r.order_dates.end_date),n=n.filter((function(e){var t=new Date(e.date);return t>=a&&t<=s})),e.setState({orders:n,active:1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDelete=function(){var t=Object(_.a)(m.a.mark((function t(r,n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({spinner:!0,delete_order:n.order_no}),t.next=3,e.props.DELETE_ENTRY_ACTION(r,n);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.componentDidMount=function(){var t=e.props.entries,r=new Date(e.props.order_dates.start_date),n=new Date(e.props.order_dates.end_date);t=t.filter((function(e){var t=new Date(e.date);return t>=r&&t<=n})),e.setState({orders:t,delete_order:null})},e}return Object(u.a)(r,[{key:"numberWithCommas",value:function(e){try{return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return e}}},{key:"render",value:function(){for(var e=this,t=[],r=this.state.active,n=50*(r-1),a=function(n){t.push(Object(gr.jsx)(nn.a.Item,{active:n===r,onClick:function(){return e.setState({active:n})},children:n},n))},s=1;s<=Math.ceil(this.state.orders.length/50);s++)a(s);return Object(gr.jsxs)("div",{className:"order-table",children:[Object(gr.jsxs)("div",{className:"table-header",children:[Object(gr.jsx)("h6",{}),Object(gr.jsxs)(v.a,{className:"d-flex",onSubmit:this.onSearch,children:[Object(gr.jsx)(la.a,{type:"search",placeholder:"Search by order no.",className:"me-2","aria-label":"Search by order no.",size:"sm",onChange:function(t){return e.onSearchChange(t.target.value)}}),Object(gr.jsx)(y.a,{variant:"outline-primary",type:"submit",children:"Search"})]})]}),Object(gr.jsxs)(an.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(gr.jsx)("thead",{children:Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("th",{}),Object(gr.jsx)("th",{children:"Date"}),Object(gr.jsx)("th",{children:"Product"}),Object(gr.jsx)("th",{children:"Customer"}),Object(gr.jsx)("th",{children:"Order No"}),Object(gr.jsx)("th",{children:"Entry No"}),Object(gr.jsx)("th",{children:"S.Price"}),Object(gr.jsx)("th",{children:"OBS Vol"}),Object(gr.jsx)("th",{children:"Vol@20"}),Object(gr.jsx)("th",{children:"Amount"}),Object(gr.jsx)("th",{children:"Edit"}),Object(gr.jsx)("th",{children:"Del"})]})}),Object(gr.jsx)("tbody",{children:this.state.orders.map((function(t,r){return Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("td",{children:n+r+1}),Object(gr.jsx)("td",{children:t.date}),Object(gr.jsx)("td",{children:t.product}),Object(gr.jsx)("td",{children:t.customer}),Object(gr.jsx)("td",{children:t.order_no}),Object(gr.jsx)("td",{children:t.entry_no}),Object(gr.jsx)("td",{children:t.selling_price}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_obs)}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_20)}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_obs*t.selling_price)}),Object(gr.jsx)("td",{children:Object(gr.jsx)(Lr.a,{contentStyle:{width:500,minHeight:400},trigger:Object(gr.jsx)(y.a,{variant:"transparent",className:"action-button",children:Object(gr.jsx)(Ir.f,{color:"blue",size:20})}),position:"left top",children:Object(gr.jsx)(ha,{order:t})})}),Object(gr.jsx)("td",{children:Object(gr.jsx)(Lr.a,{contentStyle:{width:300,minHeight:150},onOpen:function(){return e.setState({success:!1})},trigger:Object(gr.jsx)(y.a,{variant:"transparent",className:"action-button",onClick:function(){return e.setState({success:!1})},children:Object(gr.jsx)(Ir.e,{color:"red",size:20})}),position:"left top",children:Object(gr.jsxs)("div",{className:"order-delete",children:[e.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:e.state.spinner})}):null,Object(gr.jsx)("h6",{children:"Are you sure you want to delete this record?"}),e.state.success?Object(gr.jsx)(x.a,{variant:"success",size:"sm",children:"Entry Deleted Successful"}):null,Object(gr.jsxs)("div",{className:"delete-buttons",children:[Object(gr.jsx)(y.a,{variant:"secondary",className:"cancel-button",onClick:function(){return e.setState({success:!1})},children:"Cancel"}),Object(gr.jsxs)(y.a,{variant:"danger",onClick:function(){return e.handleDelete(t.id,t)},children:[Object(gr.jsx)(Ir.e,{color:"red",size:20})," Delete"]})]})]})})})]},r)}))})]}),Object(gr.jsx)("div",{children:Object(gr.jsx)(nn.a,{size:"sm",children:t})})]})}}]),r}(a.a.Component)),ja={DELETE_ENTRY_ACTION:function(e,t){return function(){var r=Object(_.a)(m.a.mark((function r(n){return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Gt(e,t).then((function(e){n({type:Oe,payload:e})})).catch((function(e){console.log(e)}));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},ENTRY_LIST_ACTION:xr},ma=Object(c.b)((function(e){var t={start_date:new Date(2022,1,20),end_date:new Date(2022,1,28)};return{entries:e.list_reducer.entries?e.list_reducer.entries:[],deleted_entry:e.update_reducer.deleted_entry,order_dates:e.list_reducer.order_dates?e.list_reducer.order_dates:t}}),ja)(_a),ba=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={spinner:!1,redirect:!1},e.componentWillReceiveProps=function(t){e.setState({spinner:!1})},e.componentWillMount=Object(_.a)(m.a.mark((function t(){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0!==(r=e.props.token)&&""!==r||e.setState({redirect:!0});case 2:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"render",value:function(){return this.state.redirect?Object(gr.jsx)(h.a,{to:"/login"}):Object(gr.jsx)(Ur,{headerTitle:"Orders",children:this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,visible:this.state.spinner})}):Object(gr.jsxs)("div",{children:[Object(gr.jsx)(ua,{}),Object(gr.jsx)(ma,{data:this.props.entries})]})})}}]),r}(a.a.Component),Oa={ENTRY_LIST_ACTION:xr},fa=Object(c.b)((function(e){return{token:e.auth_reducer.token,entries:e.list_reducer.entries?e.list_reducer.entries:[]}}),Oa)(ba),xa=(r(233),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).componentWillReceiveProps=function(e){n.setState({series:[{data:e.data.data.values,name:e.data.data.name}]})},n.state={series:[{name:n.props.data.data.name,data:n.props.data.data.values}],options:{chart:{type:"bar",height:350},title:{text:"Monthly Sale Comparison"},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:n.props.data.months},yaxis:{title:{text:"$ (Millions)"}},fill:{opacity:1},tooltip:{y:{formatter:function(e){return"$ "+e+" thousands"}}}}},n}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"bar",height:350})})}}]),r}(a.a.Component)),va=new Date("28 Feb 2022"),ya=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ta=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).componentWillReceiveProps=function(e){n.setState({series:[{data:e.data.values,name:e.name}]})},n.addMonths=function(e,t){return e.setMonth(e.getMonth()+t),e},n.componentDidMount=function(){n.setState({data:n.props.data.values,name:n.props.name,timeline:"one_month"})},n.state={series:[{name:n.props.name,data:n.props.data.values}],options:{chart:{id:"area-datetime",type:"area",height:350,zoom:{autoScaleYaxis:!0}},title:{text:"Sales Trend"},annotations:{xaxis:[{x:new Date("1 ".concat(ya[va.getMonth()]," ").concat(va.getFullYear())).getTime(),borderColor:"#999",yAxisIndex:0,label:{show:!0,text:"Sales",style:{color:"#fff",background:"#775DD0"}}}]},dataLabels:{enabled:!0},markers:{size:0,style:"hollow"},xaxis:{type:"datetime",min:new Date("1 ".concat(ya[va.getMonth()]," ").concat(va.getFullYear())).getTime(),tickAmount:10},yaxis:{title:{text:"$ (Millions)"}},tooltip:{x:{format:"dd MMM yyyy"}},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,100]}}},selection:"one_month"},n}return Object(u.a)(r,[{key:"updateData",value:function(e){this.setState({selection:e});var t=new Date("1 ".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][va.getMonth()]," ").concat(va.getFullYear())),r=new Date("28 Feb 2022");r=this.addMonths(r,-6);var n=new Date("28 Feb 2022");switch(n=this.addMonths(n,-12),e){case"one_month":Qr.a.exec("area-datetime","zoomX",t.getTime(),va.getTime());break;case"six_months":Qr.a.exec("area-datetime","zoomX",r.getTime(),va.getTime());break;case"one_year":Qr.a.exec("area-datetime","zoomX",n.getTime(),va.getTime());break;case"ytd":Qr.a.exec("area-datetime","zoomX",new Date("01 Jan ".concat(va.getFullYear())).getTime(),va.getTime())}}},{key:"render",value:function(){var e=this;return Object(gr.jsxs)("div",{id:"chart",children:[Object(gr.jsxs)("div",{className:"toolbar",children:[Object(gr.jsx)("button",{id:"one_month",onClick:function(){return e.updateData("one_month")},className:"one_month"===this.state.selection?"date_select active":"date_select",children:"One Month"}),"\xa0",Object(gr.jsx)("button",{id:"six_months",onClick:function(){return e.updateData("six_months")},className:"six_months"===this.state.selection?"date_select active":"date_select",children:"Six Months"}),"\xa0",Object(gr.jsx)("button",{id:"one_year",onClick:function(){return e.updateData("one_year")},className:"one_year"===this.state.selection?"date_select active":"date_select",children:"One Year"}),"\xa0",Object(gr.jsx)("button",{id:"ytd",onClick:function(){return e.updateData("ytd")},className:"ytd"===this.state.selection?"date_select active":"date_select",children:"This year"}),"\xa0"]}),Object(gr.jsx)("div",{id:"chart-timeline",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"area",height:350})})]})}}]),r}(a.a.Component),Aa=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).componentWillReceiveProps=function(e){n.setState({series:[{data:e.data.data.orders,name:e.data.data.name}]})},n.state={series:[{name:n.props.data.data.name,data:n.props.data.data.orders}],options:{chart:{height:300,type:"radar"},dataLabels:{enabled:!0},plotOptions:{radar:{size:140,polygons:{strokeColors:"#e9e9e9",fill:{colors:["aliceblue","#fff"]}}}},title:{text:"Monthly Orders"},colors:["#008ffb"],markers:{size:4,colors:["#fff"],strokeColor:"#FF4560",strokeWidth:2},tooltip:{y:{formatter:function(e){return e}}},xaxis:{categories:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},yaxis:{tickAmount:7,labels:{formatter:function(e,t){return t%2===0?e:""}}}}},n}return Object(u.a)(r,[{key:"render",value:function(){return console.log(this.props.data),Object(gr.jsx)("div",{id:"chart",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"radar",height:350})})}}]),r}(a.a.Component),Da=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={data:e.props.data},e.componentWillReceiveProps=function(t){e.setState({data:t.data})},e}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsxs)("div",{children:[Object(gr.jsx)(O.a,{children:Object(gr.jsx)(f.a,{children:Object(gr.jsx)("div",{className:"chart-area large-chart",children:Object(gr.jsx)(Ta,{name:this.state.data.name,data:this.state.data.main})})})}),Object(gr.jsxs)(O.a,{children:[Object(gr.jsx)(f.a,{xs:7,children:Object(gr.jsx)("div",{className:"chart-area large-chart",children:Object(gr.jsx)(xa,{data:this.state.data.months})})}),Object(gr.jsx)(f.a,{children:Object(gr.jsx)("div",{className:"chart-area small-chart",children:Object(gr.jsx)(Aa,{data:this.state.data.months})})})]})]})}}]),r}(a.a.Component),Ca=Da,ga=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={orders:[],order_no:null,active:1},e.onSearchChange=function(t){""===t||void 0===t||null===t?e.setState({orders:e.props.entries}):e.setState({order_no:t})},e.onSearch=function(t){t.preventDefault();var r=e.state.order_no,n=e.props.entries;n=n.filter((function(e){return e.order_no===r})),e.setState({orders:n})},e.componentWillReceiveProps=function(t){var r=t.name,n=t.entries;n=n.filter((function(e){return e.product.name===r})),e.setState({orders:n})},e.componentDidMount=function(){var t=e.props.name,r=e.props.entries;r=r.filter((function(e){return e.product.name===t})),e.setState({orders:r})},e}return Object(u.a)(r,[{key:"numberWithCommas",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"render",value:function(){for(var e=this,t=[],r=this.state.active,n=10*(r-1),a=10*r,s=function(n){t.push(Object(gr.jsx)(nn.a.Item,{active:n===r,onClick:function(){return e.setState({active:n})},children:n},n))},o=1;o<=Math.ceil(this.state.orders.length/10);o++)s(o);return Object(gr.jsxs)("div",{className:"order-table",children:[Object(gr.jsxs)("div",{className:"table-header",children:[Object(gr.jsx)("h6",{children:"Records"}),Object(gr.jsxs)(v.a,{className:"d-flex",onSubmit:this.onSearch,children:[Object(gr.jsx)(la.a,{type:"search",placeholder:"Search by order no.",className:"me-2","aria-label":"Search by order no.",size:"sm",onChange:function(t){return e.onSearchChange(t.target.value)}}),Object(gr.jsx)(y.a,{variant:"outline-primary",type:"submit",children:"Search"})]})]}),Object(gr.jsxs)(an.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(gr.jsx)("thead",{children:Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("th",{}),Object(gr.jsx)("th",{children:"Date"}),Object(gr.jsx)("th",{children:"Product"}),Object(gr.jsx)("th",{children:"Customer"}),Object(gr.jsx)("th",{children:"Order No"}),Object(gr.jsx)("th",{children:"Entry No"}),Object(gr.jsx)("th",{children:"S.Price"}),Object(gr.jsx)("th",{children:"OBS Vol"}),Object(gr.jsx)("th",{children:"Vol@20"}),Object(gr.jsx)("th",{children:"Amount (Kshs)"})]})}),Object(gr.jsx)("tbody",{children:this.state.orders.slice(n,a).map((function(t,r){return Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("td",{children:r+1}),Object(gr.jsx)("td",{children:t.date}),Object(gr.jsx)("td",{children:t.product.name}),Object(gr.jsx)("td",{children:t.truck.customer}),Object(gr.jsx)("td",{children:t.order_no}),Object(gr.jsx)("td",{children:t.entry_no}),Object(gr.jsx)("td",{children:t.selling_price}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_obs)}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_20)}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_obs*t.selling_price)})]},r)}))})]}),Object(gr.jsx)(nn.a,{size:"sm",children:t})]})}}]),r}(a.a.Component),Ea=Object(c.b)((function(e){return{entries:e.list_reducer.entries?e.list_reducer.entries:[],product_bi_list:e.list_reducer.product_bi_list?e.list_reducer.product_bi_list:{},product_index:e.list_reducer.product_index}}),{})(ga),Na=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={startDate:new Date,endDate:new Date,key:"selection",date:!0,cost:!1,index:null},e.handleSubmit=function(){var t=Object(_.a)(m.a.mark((function t(r){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),n=e.state.index,t.next=4,e.props.PRODUCT_INDEX_ACTION(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(gr.jsx)("div",{children:Object(gr.jsxs)("div",{className:"product-top",children:[Object(gr.jsx)("div",{children:Object(gr.jsx)("h6",{children:this.props.products[this.props.product_index].name})}),Object(gr.jsxs)(v.a,{className:"product-form",onSubmit:this.handleSubmit,children:[Object(gr.jsxs)(v.a.Group,{className:"mb-2 product-input",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{style:{marginRight:10},children:"Product"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.setState({index:t.target.value})},children:[Object(gr.jsx)("option",{children:"Select"}),this.props.products.map((function(e,t){return Object(gr.jsx)("option",{value:t,children:e.name})}))]})]}),Object(gr.jsx)("button",{type:"submit",className:"product-refresh",children:Object(gr.jsx)(Ir.l,{size:30,color:"#008ffb"})})]})]})})}}]),r}(a.a.Component),Sa={PRODUCT_INDEX_ACTION:yr},Ia=Object(c.b)((function(e){return{products:e.list_reducer.products?e.list_reducer.products:[],product_index:e.list_reducer.product_index,entries:e.list_reducer.entries?e.list_reducer.entries:[]}}),Sa)(Na),wa=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1,spinner:!1,didnt_load:!1,data:null},e.componentWillReceiveProps=function(t){t.product_bi_list[t.product_index].main?e.setState({spinner:!1,didnt_load:!1,data:t.product_bi_list[t.product_index]}):e.setState({spinner:!1,didnt_load:!0})},e.componentDidMount=Object(_.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({data:e.props.product_bi_list[e.props.product_index]});case 1:case"end":return t.stop()}}),t)}))),e.componentWillMount=Object(_.a)(m.a.mark((function t(){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(r=e.props.token)&&""!==r){t.next=5;break}e.setState({redirect:!0}),t.next=8;break;case 5:return e.setState({spinner:!0}),t.next=8,e.props.PRODUCT_BI_LIST_ACTION();case 8:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"render",value:function(){if(this.state.redirect)return Object(gr.jsx)(h.a,{to:"/login"});var e=this.state.data;return Object(gr.jsx)(Ur,{headerTitle:"Products",children:this.state.didnt_load?Object(gr.jsx)("div",{children:Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:"Something went wrong. Please contact the Admin."})}):Object(gr.jsx)("div",{children:this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):Object(gr.jsxs)("div",{children:[Object(gr.jsx)(Ia,{}),Object(gr.jsx)(Ca,{data:e}),Object(gr.jsx)(Ea,{name:e.name})]})})})}}]),r}(a.a.Component),ka={PRODUCT_BI_LIST_ACTION:Dr},Ra=Object(c.b)((function(e){return{token:e.auth_reducer.token,product_bi_list:e.list_reducer.product_bi_list?e.list_reducer.product_bi_list:{},product_index:e.list_reducer.product_index}}),ka)(wa),Pa=(r(420),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).update=function(e){var t=e.customer_data,r=n.mapData(t,parseInt(e.update_customer_year));console.log(t),n.setState({series:[{name:e.dashboard_metric?"Revenue":"Litres",data:r}]})},n.componentWillReceiveProps=function(e){n.update(e)},n.mapData=function(e,t){var r=e.filter((function(e){return e.year===parseInt(t)})),n=new Array(12).fill(0);for(var a in e=r[0].data){var s=e[a];n[s.month]=s.total}return console.log(n),n},n.componentDidMount=function(){n.update(n.props)},n.state={series:[],options:{chart:{type:"bar",height:350},title:{text:"Monthly Sale Comparison"},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{title:{text:"Months"},categories:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},yaxis:{title:{text:n.props.dashboard_metric?"Kshs (Millions)":"Litres"}},fill:{opacity:1},tooltip:{y:{formatter:n.props.dashboard_metric?function(e){return"Kshs "+e+" Million"}:function(e){return e+" Litres"}}}}},n}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"bar",height:350})})}}]),r}(a.a.Component)),Ma=Object(c.b)((function(e){return{customer_data:e.list_reducer.customer_data?e.list_reducer.customer_data:{},update_customer_year:e.update_reducer.update_customer_year}}),{})(Pa),Ua=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).componentWillReceiveProps=function(e){n.setState({series:[{name:e.customer_data.data.name,data:e.customer_data.data.orders}]})},n.componentDidMount=function(){n.setState({series:[{name:n.props.customer_data.data.name,data:n.props.customer_data.data.orders}]})},n.state={series:[],options:{chart:{height:200,type:"radar"},dataLabels:{enabled:!0},plotOptions:{radar:{size:140,polygons:{strokeColors:"#e9e9e9",fill:{colors:["aliceblue","#fff"]}}}},title:{text:"Monthly Orders"},colors:["#008ffb"],markers:{size:4,colors:["#fff"],strokeColor:"#FF4560",strokeWidth:2},tooltip:{y:{formatter:function(e){return e}}},xaxis:{categories:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},yaxis:{tickAmount:1,labels:{formatter:function(e,t){return t%2===0?e:""}}}}},n}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsx)("div",{id:"chart",children:Object(gr.jsx)(Xr.a,{options:this.state.options,series:this.state.series,type:"radar",height:350})})}}]),r}(a.a.Component),La=(Object(c.b)((function(e){return{customer_data:e.list_reducer.customer_data?e.list_reducer.customer_data.monthly_orders:{}}}),{})(Ua),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={info:[]},e.componentWillReceiveProps=function(t){var r=t.customer_data.filter((function(t){return t.year===parseInt(e.props.update_customer_year)}));e.setState({info:r[0]})},e.componentDidMount=function(){var t=e.props.customer_data.filter((function(t){return t.year===parseInt(e.props.update_customer_year)}));e.setState({info:t[0]})},e}return Object(u.a)(r,[{key:"numberWithCommas",value:function(e){return(1e6*e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},{key:"render",value:function(){return console.log(this.props.data),Object(gr.jsxs)("div",{className:"customer-content-header",children:[Object(gr.jsx)("h5",{className:"customer-content-name",children:this.state.info.name}),Object(gr.jsx)("div",{className:"customer-info",children:Object(gr.jsxs)(an.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(gr.jsx)("thead",{children:Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("th",{children:"Total Sales"}),Object(gr.jsx)("th",{children:"Total Amount"})]})}),Object(gr.jsx)("tbody",{children:Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("td",{children:this.state.info.orders}),Object(gr.jsx)("td",{children:this.numberWithCommas(this.state.info.total)})]})})]})})]})}}]),r}(a.a.Component)),za=Object(c.b)((function(e){return{customer_data:e.list_reducer.customer_data?e.list_reducer.customer_data:{},update_customer_year:e.update_reducer.update_customer_year}}),{})(La),Fa=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={orders:[],orders_all:[],active:1},e.componentWillReceiveProps=function(t){var r=t.customer_data.filter((function(t){return t.year===parseInt(e.props.update_customer_year)}));e.setState({orders:r[0].entries,orders_all:r[0].entries})},e.componentDidMount=function(){var t=e.props.customer_data.filter((function(t){return t.year===parseInt(e.props.update_customer_year)}));console.log(t),e.setState({orders:t[0].entries,orders_all:t[0].entries})},e}return Object(u.a)(r,[{key:"numberWithCommas",value:function(e){try{return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return e}}},{key:"render",value:function(){var e=this,t=[],r=this.state.active,n=10*(r-1),a=10*r;console.log(this.state.orders_all);for(var s=function(n){t.push(Object(gr.jsx)(nn.a.Item,{active:n===r,onClick:function(){return e.setState({active:n})},children:n},n))},o=1;o<=Math.ceil(this.state.orders_all.length/10);o++)s(o);return Object(gr.jsxs)("div",{className:"customer-orders",children:[Object(gr.jsx)("div",{className:"customer-orders-header",children:Object(gr.jsx)("h6",{children:"Orders"})}),Object(gr.jsxs)("div",{className:"customer-orders-table",children:[Object(gr.jsxs)(an.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(gr.jsx)("thead",{children:Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("th",{}),Object(gr.jsx)("th",{children:"Date"}),Object(gr.jsx)("th",{children:"Product"}),Object(gr.jsx)("th",{children:"Order No"}),Object(gr.jsx)("th",{children:"Entry No"}),Object(gr.jsx)("th",{children:"S.Price"}),Object(gr.jsx)("th",{children:"OBS Vol"}),Object(gr.jsx)("th",{children:"Vol@20"}),Object(gr.jsx)("th",{children:"Amount"})]})}),Object(gr.jsx)("tbody",{children:this.state.orders_all.slice(n,a).map((function(t,r){return Object(gr.jsxs)("tr",{children:[Object(gr.jsx)("td",{children:r+1}),Object(gr.jsx)("td",{children:t.date}),Object(gr.jsx)("td",{children:t.product.name}),Object(gr.jsx)("td",{children:t.order_no}),Object(gr.jsx)("td",{children:t.entry_no}),Object(gr.jsx)("td",{children:t.selling_price}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_obs)}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_20)}),Object(gr.jsx)("td",{children:e.numberWithCommas(t.vol_obs*t.selling_price)})]},r)}))})]}),Object(gr.jsx)(nn.a,{size:"sm",children:t})]})]})}}]),r}(a.a.Component),Ya=(Object(c.b)((function(e){return{customer_data:e.list_reducer.customer_data?e.list_reducer.customer_data:[],update_customer_year:e.update_reducer.update_customer_year}}),{})(Fa),function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={year:e.props.update_customer_year,month:parseInt(e.props.update_dashboard_customer_month),products:e.props.products,product:e.props.update_dashboard_customer_product,depot:null},e.componentWillReceiveProps=function(t){e.setState({year:t.update_customer_year,month:parseInt(t.update_dashboard_customer_month),product:t.update_dashboard_customer_product})},e.handleYearChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_CUSTOMER_YEAR_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleMonthChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleProductChange=function(){var t=Object(_.a)(m.a.mark((function t(r){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;this.state.products,this.props.depots;return Object(gr.jsx)("div",{className:"pie-select-div ",children:Object(gr.jsxs)(v.a.Group,{className:"mb-4 pie-select",controlId:"exampleForm.ControlInput1",children:[Object(gr.jsx)(v.a.Label,{children:"Year"}),Object(gr.jsxs)(v.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleYearChange(t.target.value)},children:[Object(gr.jsx)("option",{children:this.state.year}),[2022,2021].map((function(t){return parseInt(e.state.year)===t?null:Object(gr.jsx)("option",{value:t,children:t})}))]})]})})}}]),r}(a.a.Component)),Ha={UPDATE_DASHBOARD_CUSTOMER_MONTH_ACTION:ir,UPDATE_DASHBOARD_CUSTOMER_YEAR_ACTION:cr,UPDATE_DASHBOARD_CUSTOMER_PRODUCT_ACTION:ur,UPDATE_CUSTOMER_YEAR_ACTION:jr},Ga=Object(c.b)((function(e){return{update_dashboard_customer_month:e.update_reducer.update_dashboard_customer_month,update_dashboard_customer_year:e.update_reducer.update_dashboard_customer_year,update_dashboard_customer_product:e.update_reducer.update_dashboard_customer_product,update_customer_year:e.update_reducer.update_customer_year,products:e.list_reducer.products,depots:e.list_reducer.depot_time_series.depots}}),Ha)(Ya),Ba=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={orders:[],order_no:null,redirect:!1,spinner:!1,didnt_load:!1,customer_id:0,customer_data:e.props.dashboard_metric?e.props.customers[0].revenue_monthly:e.props.customers[0].quantity_monthly,customer:null,customers:e.props.customers},e.onSearchChange=function(t){""===t||void 0===t||null===t?e.setState({customers:e.props.customers}):e.setState({customer:t})},e.onSearch=function(t){t.preventDefault();var r=e.state.customer,n=e.props.customers;n=n.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})),e.setState({customers:n})},e.onClick=function(){var t=Object(_.a)(m.a.mark((function t(r){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.customers.findIndex((function(e){return e.name===r})),console.log(n),t.next=4,e.setState({customer_id:n});case 4:return t.next=6,e.props.CUSTOMER_DATA_ACTION(e.props.dashboard_metric?e.props.customers[n].revenue_monthly:e.props.customers[n].quantity_monthly);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.componentWillReceiveProps=function(t){console.log(t.customers),t.customers.length>0?e.setState({spinner:!1,didnt_load:!1}):e.setState({spinner:!1,didnt_load:!0})},e.componentDidMount=Object(_.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.componentWillMount=Object(_.a)(m.a.mark((function t(){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(r=e.props.token)&&""!==r){t.next=5;break}e.setState({redirect:!0}),t.next=8;break;case 5:return e.setState({spinner:!0}),t.next=8,e.props.CUSTOMER_DATA_ACTION(e.props.dashboard_metric?e.props.customers[0].revenue_monthly:e.props.customers[0].quantity_monthly);case 8:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return this.state.redirect?Object(gr.jsx)(h.a,{to:"/login"}):Object(gr.jsx)(Ur,{headerTitle:"Customers",children:this.state.didnt_load?Object(gr.jsx)("div",{children:Object(gr.jsx)(x.a,{variant:"danger",size:"sm",children:"Something went wrong. Please contact the Admin."})}):Object(gr.jsx)("div",{children:this.state.spinner?Object(gr.jsx)("div",{className:"spinner",children:Object(gr.jsx)(T.a,{color:"#00BFFF",height:100,width:100,timeout:4e3,visible:this.state.spinner})}):Object(gr.jsxs)("div",{children:[Object(gr.jsx)(Ga,{}),Object(gr.jsx)("div",{className:"chart-area",children:Object(gr.jsxs)(O.a,{children:[Object(gr.jsx)(f.a,{children:Object(gr.jsxs)("div",{className:"customer-side",children:[Object(gr.jsx)("h6",{children:"Pick a customer"}),Object(gr.jsxs)(v.a,{className:"d-flex",onSubmit:this.onSearch,children:[Object(gr.jsx)(la.a,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search",size:"sm",onChange:function(t){return e.onSearchChange(t.target.value)}}),Object(gr.jsx)(y.a,{type:"submit",variant:"outline-primary",size:"sm",children:"Search"})]}),Object(gr.jsx)("div",{children:this.state.customers.map((function(t,r){return Object(gr.jsx)("div",{className:"customer-scroll",children:e.state.customer_id===r?Object(gr.jsx)(y.a,{className:"customer active",variant:"transparent",onClick:function(){return e.onClick(t.name)},children:Object(gr.jsxs)("div",{className:"customer-info",children:[Object(gr.jsx)("div",{className:"customer-profile"}),Object(gr.jsxs)("div",{children:[Object(gr.jsx)("h6",{className:"customer-name",children:t.name}),Object(gr.jsx)("p",{className:"customer-location",children:t.location})]})]})}):Object(gr.jsx)(y.a,{className:"customer",variant:"transparent",onClick:function(){return e.onClick(t.name)},children:Object(gr.jsxs)("div",{className:"customer-info",children:[Object(gr.jsx)("div",{className:"customer-profile"}),Object(gr.jsxs)("div",{children:[Object(gr.jsx)("h6",{className:"customer-name",children:t.name}),Object(gr.jsx)("p",{className:"customer-location",children:t.location})]})]})})},r)}))})]})}),Object(gr.jsx)(f.a,{xs:9,children:Object(gr.jsxs)("div",{className:"customer-content",children:[Object(gr.jsx)(za,{data:this.state.customer_data}),Object(gr.jsx)("div",{children:Object(gr.jsxs)(O.a,{children:[Object(gr.jsx)(f.a,{xs:12,children:Object(gr.jsx)("div",{className:"chart-area",children:Object(gr.jsx)(Ma,{data:this.state.customer_data,update_customer_year:this.props.update_customer_year,dashboard_metric:this.props.dashboard_metric})})}),Object(gr.jsx)(f.a,{children:Object(gr.jsx)("div",{className:""})})]})})]})})]})})]})})})}}]),r}(a.a.Component),Xa={CUSTOMER_BI_LIST_ACTION:Cr,CUSTOMER_DATA_ACTION:function(e){return function(t){t({type:ge,payload:e})}},CUSTOMER_LIST_ACTION:fr},Wa=Object(c.b)((function(e){return{token:e.auth_reducer.token,customers:e.list_reducer.customers_monthly?e.list_reducer.customers_monthly:[],customer_data:e.list_reducer.customer_data?e.list_reducer.customer_data:{},customer_expand:e.list_reducer.customer_data?e.list_reducer.customer_expand:{},update_customer_year:e.update_reducer.update_customer_year,dashboard_metric:e.list_reducer.dashboard_metric}}),Xa)(Ba),Ja=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return Object(gr.jsx)(d.a,{children:Object(gr.jsxs)(h.d,{children:[Object(gr.jsx)(h.b,{path:"/login",exact:!0,component:Sr}),Object(gr.jsx)(h.b,{path:"/",exact:!0,component:ea}),Object(gr.jsx)(h.b,{path:"/orders",exact:!0,component:fa}),Object(gr.jsx)(h.b,{path:"/depots",exact:!0,component:kn}),Object(gr.jsx)(h.b,{path:"/products",exact:!0,component:Ra}),Object(gr.jsx)(h.b,{path:"/customers",exact:!0,component:Wa}),Object(gr.jsx)(h.b,{path:"/download_excel",exact:!0,component:oa})]})})}}]),r}(a.a.Component),Ka=Ja;var qa=function(){return Object(gr.jsx)(c.a,{store:Be,children:Object(gr.jsx)(Ka,{})})},Va=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,433)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),s(e),o(e)}))};o.a.render(Object(gr.jsx)(a.a.StrictMode,{children:Object(gr.jsx)(qa,{})}),document.getElementById("root")),Va()},56:function(e,t,r){}},[[422,1,2]]]);
//# sourceMappingURL=main.f3a68a0e.chunk.js.map