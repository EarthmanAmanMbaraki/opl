"use strict";(self.webpackChunkopl_frontend=self.webpackChunkopl_frontend||[]).push([[709],{7910:function(e,r,n){n.r(r),n.d(r,{default:function(){return m}});var t=n(5861),o=n(5671),a=n(3144),_=n(136),s=n(5716),T=n(7757),i=n.n(T),c=n(2791),u=n(7022),l=n(9743),O=n(2677),E=n(717),A=n(3360),f=n(6168),d=n(6871),C=(n(5866),n(3065),n(4650)),N=n(7883),p=n(9503),D=n(184),P=function(e){(0,_.Z)(n,e);var r=(0,s.Z)(n);function n(){return(0,o.Z)(this,n),r.apply(this,arguments)}return(0,a.Z)(n,[{key:"render",value:function(){var e=this;return Object.keys(this.props.errors).map((function(r,n){return(0,D.jsxs)(p.Z,{variant:"danger",children:[r,": ",e.props.errors[r][0]]},n)}))}}]),n}(c.Component),I=P,U=n(9600),x=n(3847),R=function(e){(0,_.Z)(n,e);var r=(0,s.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,_=new Array(a),s=0;s<a;s++)_[s]=arguments[s];return(e=r.call.apply(r,[this].concat(_))).state={spinner:!1,redirect:!1,redirect_depot:!1,email:"",password:"",show_error:!1,null_error:!1,loaded:!1},e.onSubmit=function(){var r=(0,t.Z)(i().mark((function r(n){var t,o,a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),r.next=3,e.props.GET_TOKEN_ERROR_REMOVE_ACTION();case 3:if(t=e.state,o=t.email,a=t.password,""!==o&&""!==a){r.next=8;break}e.setState({null_error:!0}),r.next=11;break;case 8:return e.setState({spinner:!0,show_error:!1}),r.next=11,e.props.GET_TOKEN_ACTION(o,a);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,r=this.state,n=r.show_error,t=r.null_error,o=r.spinner;r.email;return this.state.redirect?(0,D.jsx)(d.Fg,{to:"/"}):this.state.redirect_depot?(0,D.jsx)(d.Fg,{to:"/depots"}):(0,D.jsx)(u.Z,{children:(0,D.jsxs)(l.Z,{className:"login-row",children:[o?(0,D.jsx)(U.Z,{spinner:o}):null,(0,D.jsx)(O.Z,{className:"login-row__logo-col",children:(0,D.jsx)("img",{src:"".concat(N.J,"/static/opl_logo.png"),alt:"logo"})}),(0,D.jsx)(O.Z,{xs:7,className:"login-row__form-col",children:(0,D.jsxs)(E.Z,{onSubmit:this.onSubmit,className:"login-form",children:[(0,D.jsxs)("div",{className:"login-form__title",children:[(0,D.jsx)("h3",{children:"Sign in To The Dashboard"}),(0,D.jsx)("p",{children:"Enter your email and password to sign in."})]}),n?(0,D.jsx)(I,{errors:this.props.login_error}):null,t?(0,D.jsx)(I,{errors:{"":["Fields cannot be empty"]}}):null,(0,D.jsx)(E.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:(0,D.jsx)(E.Z.Control,{type:"text",placeholder:"Enter email",className:"login-form__input",onChange:function(r){return e.setState({email:r.target.value,show_error:!1,null_error:!1})}})}),(0,D.jsx)(E.Z.Group,{className:"mb-3",controlId:"formBasicPassword",children:(0,D.jsx)(E.Z.Control,{type:"password",placeholder:"Password",className:"login-form__input",onChange:function(r){return e.setState({password:r.target.value,show_error:!1,null_error:!1})}})}),(0,D.jsx)(A.Z,{variant:"primary",type:"submit",className:"login-form__submit",children:"Submit"})]})})]})})}}]),n}(c.Component);R.getDerivedStateFromProps=function(){var e=(0,t.Z)(i().mark((function e(r,n){var t,o,a,_,s,T,c,u,l,O;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.login_error,o=r.token,a=r.product_list,_=r.depot_list,s=r.customer_list,T=new Date("30 Jan 2022"),c=new Date("30 Jan 2022"),u=new Date("30 Jan 2022"),l=new Date("30 Jan 2022"),"object"!==typeof r.login_error||null===t){e.next=10;break}n.show_error=!0,n.spinner=!1,e.next=57;break;case 10:if(void 0===a||void 0===_||void 0===s){e.next=16;break}!1===o.is_staff?n.redirect_depot=!0:void 0!==s&&(n.redirect=!0),n.show_error=!1,n.spinner=!1,e.next=57;break;case 16:if(void 0===o||null===o||!1!==n.loaded){e.next=57;break}return n.loaded=!0,O=(0,x.zI)(c,-1),e.next=21,r.UPDATE_DASHBOARD_METRIC_ACTION(!0);case 21:return e.next=23,r.UPDATE_CURRENCY_TYPE_ACTION("Million");case 23:return e.next=25,r.UPDATE_SELECTION_DATES_ACTION({endDate:T,startDate:O});case 25:return e.next=27,r.UPDATE_DEPOT_MONTH_MONTH_ACTION(13);case 27:return e.next=29,r.UPDATE_DEPOT_MONTH_YEAR_ACTION(T.getFullYear());case 29:return e.next=31,r.UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION(13);case 31:return e.next=33,r.UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION(T.getFullYear());case 33:return e.next=35,r.UPDATE_DEPOT_CUSTOMER_YEAR_ACTION(T.getFullYear());case 35:return e.next=37,r.UPDATE_DEPOT_CUSTOMER_MONTH_ACTION(13);case 37:return e.next=39,r.UPDATE_DEPOT_ACTION(0);case 39:if(!o.is_staff){e.next=50;break}return e.next=42,r.UPDATE_SALES_DATE_ACTION({end_date:u,start_date:(0,x.zI)(l,-1)});case 42:return e.next=44,r.UPDATE_PRODUCT_MONTH_YEAR_ACTION(T.getFullYear());case 44:return e.next=46,r.UPDATE_TOP_CUSTOMER_MONTH_ACTION(13);case 46:return e.next=48,r.UPDATE_TOP_CUSTOMER_YEAR_ACTION(T.getFullYear());case 48:return e.next=50,r.UPDATE_TOP_CUSTOMER_PRODUCT_ACTION("All");case 50:return e.next=52,r.GET_DEPOT_LIST_ACTION();case 52:return e.next=54,r.GET_PRODUCT_LIST_ACTION();case 54:return e.next=56,r.GET_CUSTOMER_LIST_ACTION();case 56:case 57:return e.abrupt("return",n);case 58:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}();var h={GET_TOKEN_ACTION:C.Wy,GET_TOKEN_ERROR_REMOVE_ACTION:C.bf,GET_TOP_CUSTOMER_ACTION:C.LS,GET_CUSTOMER_LIST_ACTION:C.lM,GET_DEPOT_MONTH_ACTION:C.au,GET_DEPOT_LIST_ACTION:C.oI,GET_PRODUCT_SERIES_ACTION:C.MV,GET_PRODUCT_MONTH_ACTION:C.qB,GET_PRODUCT_TOP_CUSTOMER_ACTION:C.Lu,GET_PRODUCT_LIST_ACTION:C.sJ,UPDATE_DASHBOARD_METRIC_ACTION:C.$d,UPDATE_SELECTION_DATES_ACTION:C.zS,UPDATE_CURRENCY_TYPE_ACTION:C.wS,UPDATE_PRODUCT_MONTH_YEAR_ACTION:C.cC,UPDATE_DEPOT_MONTH_MONTH_ACTION:C.eK,UPDATE_DEPOT_MONTH_YEAR_ACTION:C.bC,UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION:C.CU,UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION:C.zY,UPDATE_TOP_CUSTOMER_MONTH_ACTION:C.PW,UPDATE_TOP_CUSTOMER_PRODUCT_ACTION:C.zv,UPDATE_TOP_CUSTOMER_YEAR_ACTION:C.ef,UPDATE_DEPOT_CUSTOMER_MONTH_ACTION:C.JZ,UPDATE_DEPOT_CUSTOMER_YEAR_ACTION:C.QM,UPDATE_SALES_DATE_ACTION:C.JX,UPDATE_DEPOT_ACTION:C.Ek},m=(0,f.$j)((function(e){return{token:e.auth_reducer.token,login_error:e.auth_reducer.login_error,depot_list:e.list_reducer.depot_list,product_list:e.list_reducer.product_list,customer_list:e.list_reducer.customer_list}}),h)(R)},3847:function(e,r,n){n.d(r,{$G:function(){return a},P:function(){return o},zI:function(){return t}});var t=function(e,r){return e.setMonth(e.getMonth()+r),e},o=function(e){return"Million"===e?"m":"k"},a=function(e){return parseFloat(e.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0])}},7904:function(e,r,n){var t=n(2791);r.Z=function(e){var r=(0,t.useRef)(e);return(0,t.useEffect)((function(){r.current=e}),[e]),r}},9007:function(e,r,n){n.d(r,{Z:function(){return a}});var t=n(2791),o=n(7904);function a(e){var r=(0,o.Z)(e);return(0,t.useCallback)((function(){return r.current&&r.current.apply(r,arguments)}),[r])}},1784:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(885),o=n(2791);n(7904);var a=n(9007);var _="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||_?o.useLayoutEffect:o.useEffect,new WeakMap;var s=n(5341),T=n(184),i=["onKeyDown"];var c=o.forwardRef((function(e,r){var n,o=e.onKeyDown,_=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,i),c=(0,s.FT)(Object.assign({tagName:"a"},_)),u=(0,t.Z)(c,1)[0],l=(0,a.Z)((function(e){u.onKeyDown(e),null==o||o(e)}));return((n=_.href)&&"#"!==n.trim()||_.role)&&"button"!==_.role?(0,T.jsx)("a",Object.assign({ref:r},_,{onKeyDown:o})):(0,T.jsx)("a",Object.assign({ref:r},_,u,{onKeyDown:l}))}));c.displayName="Anchor";var u=c},9743:function(e,r,n){var t=n(1413),o=n(5987),a=n(1694),_=n.n(a),s=n(2791),T=n(162),i=n(184),c=["bsPrefix","className","as"],u=s.forwardRef((function(e,r){var n=e.bsPrefix,a=e.className,s=e.as,u=void 0===s?"div":s,l=(0,o.Z)(e,c),O=(0,T.vE)(n,"row"),E=(0,T.pi)(),A="".concat(O,"-cols"),f=[];return E.forEach((function(e){var r,n=l[e];delete l[e],r=null!=n&&"object"===typeof n?n.cols:n;var t="xs"!==e?"-".concat(e):"";null!=r&&f.push("".concat(A).concat(t,"-").concat(r))})),(0,i.jsx)(u,(0,t.Z)((0,t.Z)({ref:r},l),{},{className:_().apply(void 0,[a,O].concat(f))}))}));u.displayName="Row",r.Z=u}}]);
//# sourceMappingURL=709.7b160692.chunk.js.map